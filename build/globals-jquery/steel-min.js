(function(){this.steel=this.steel||{},this.steelNamed=this.steelNamed||{};var e={};e["typeof"]=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},e.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),e.get=function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in s)return s.value;var a=s.get;if(void 0!==a)return a.call(i)},e.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},e.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},function(){var t=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"abstractMethod",value:function(){throw Error("Unimplemented abstract method")}},{key:"collectSuperClassesProperty",value:function(e,t){for(var n=[e[t]];e.__proto__&&!e.__proto__.isPrototypeOf(Function);)e=e.__proto__,n.push(e[t]);return n}},{key:"getFunctionName",value:function(e){if(!e.name){var t=e.toString();e.name=t.substring(9,t.indexOf("("))}return e.name}},{key:"getUid",value:function(e){return e?e[t.UID_PROPERTY]||(e[t.UID_PROPERTY]=t.uniqueIdCounter_++):t.uniqueIdCounter_++}},{key:"identityFunction",value:function(e){return e}},{key:"isBoolean",value:function(e){return"boolean"==typeof e}},{key:"isDef",value:function(e){return void 0!==e}},{key:"isDefAndNotNull",value:function(e){return t.isDef(e)&&!t.isNull(e)}},{key:"isDocument",value:function(t){return t&&"object"===("undefined"==typeof t?"undefined":e["typeof"](t))&&9===t.nodeType}},{key:"isElement",value:function(t){return t&&"object"===("undefined"==typeof t?"undefined":e["typeof"](t))&&1===t.nodeType}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isNull",value:function(e){return null===e}},{key:"isNumber",value:function(e){return"number"==typeof e}},{key:"isWindow",value:function(e){return null!==e&&e===e.window}},{key:"isObject",value:function(t){var n="undefined"==typeof t?"undefined":e["typeof"](t);return"object"===n&&null!==t||"function"===n}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"mergeSuperClassesProperty",value:function(e,n,i){var s=n+"_MERGED";if(e.hasOwnProperty(s))return!1;var r=t.collectSuperClassesProperty(e,n);return i&&(r=i(r)),e[s]=r,!0}},{key:"nullFunction",value:function(){}}]),t}();t.UID_PROPERTY="core_"+(1e9*Math.random()>>>0),t.uniqueIdCounter_=1,this.steel.core=t}.call(this),function(){var t=this.steel.core,n=function(){function n(){e.classCallCheck(this,n)}return e.createClass(n,null,[{key:"mixin",value:function(e){for(var t,n,i=1;i<arguments.length;i++){n=arguments[i];for(t in n)e[t]=n[t]}return e}},{key:"getObjectByName",value:function(e,n){for(var i,s=e.split("."),r=n||window;i=s.shift();){if(!t.isDefAndNotNull(r[i]))return null;r=r[i]}return r}}]),n}();this.steel.object=n}.call(this),function(){var t=function(){function t(){e.classCallCheck(this,t),this.disposed_=!1}return e.createClass(t,[{key:"dispose",value:function(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)}},{key:"disposeInternal",value:function(){}},{key:"isDisposed",value:function(){return this.disposed_}}]),t}();this.steel.Disposable=t}.call(this),function(){var t=this.steel.Disposable,n=function(t){function n(t,i,s){e.classCallCheck(this,n);var r=e.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this));return r.emitter_=t,r.event_=i,r.listener_=s,r}return e.inherits(n,t),e.createClass(n,[{key:"disposeInternal",value:function(){this.removeListener(),this.emitter_=null,this.listener_=null}},{key:"removeListener",value:function(){this.emitter_.isDisposed()||this.emitter_.removeListener(this.event_,this.listener_)}}]),n}(t);this.steel.EventHandle=n}.call(this),function(){var t=this.steel.EventHandle,n=function(t){function n(t,i,s,r){e.classCallCheck(this,n);var a=e.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this,t,i,s));return a.capture_=r,a}return e.inherits(n,t),e.createClass(n,[{key:"removeListener",value:function(){this.emitter_.removeEventListener(this.event_,this.listener_,this.capture_)}}]),n}(t);this.steel.DomEventHandle=n}.call(this),function(){var t=this.steel.core,n=this.steel.object,i=this.steel.DomEventHandle,s=function(){function s(){e.classCallCheck(this,s)}return e.createClass(s,null,[{key:"addClasses",value:function(e,n){t.isObject(e)&&t.isString(n)&&("classList"in e?s.addClassesWithNative_(e,n):s.addClassesWithoutNative_(e,n))}},{key:"addClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){e.classList.add(t)})}},{key:"addClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ",i="";t=t.split(" ");for(var s=0;s<t.length;s++){var r=t[s];-1===n.indexOf(" "+r+" ")&&(i+=" "+r)}i&&(e.className=e.className+i)}},{key:"append",value:function(e,n){if(t.isString(n)&&(n=s.buildFragment(n)),n instanceof NodeList)for(var i=Array.prototype.slice.call(n),r=0;r<i.length;r++)e.appendChild(i[r]);else e.appendChild(n);return n}},{key:"buildFragment",value:function(e){var t=document.createElement("div");t.innerHTML="<br>"+e,t.removeChild(t.firstChild);for(var n=document.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n}},{key:"contains",value:function(e,n){return t.isDocument(e)?e.documentElement.contains(n):e.contains(n)}},{key:"delegate",value:function(e,t,n,i){var r=s.customEvents[t];return r&&r.delegate&&(t=r.originalEvent,i=r.handler.bind(r,i)),s.on(e,t,s.handleDelegateEvent_.bind(null,n,i))}},{key:"enterDocument",value:function(e){s.append(document.body,e)}},{key:"exitDocument",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"handleDelegateEvent_",value:function(e,n,i){s.normalizeDelegateEvent_(i);for(var r=i.target,a=!0;r&&!i.stopped&&(t.isString(e)&&s.match(r,e)&&(i.delegateTarget=r,a&=n(i)),r!==i.currentTarget);)r=r.parentNode;return i.delegateTarget=null,a}},{key:"hasClass",value:function(e,t){return"classList"in e?s.hasClassWithNative_(e,t):s.hasClassWithoutNative_(e,t)}},{key:"hasClassWithNative_",value:function(e,t){return e.classList.contains(t)}},{key:"hasClassWithoutNative_",value:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0}},{key:"isEmpty",value:function(e){return 0===e.childNodes.length}},{key:"match",value:function(e,t){if(!e||1!==e.nodeType)return!1;var n=Element.prototype,i=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return i?i.call(e,t):s.matchFallback_(e,t)}},{key:"matchFallback_",value:function(e,t){for(var n=document.querySelectorAll(t,e.parentNode),i=0;i<n.length;++i)if(n[i]===e)return!0;return!1}},{key:"normalizeDelegateEvent_",value:function(e){e.stopPropagation=s.stopPropagation_,e.stopImmediatePropagation=s.stopImmediatePropagation_}},{key:"on",value:function(e,n,r,a){if(t.isString(e))return s.delegate(document,n,e,r);var o=s.customEvents[n];return o&&o.event&&(n=o.originalEvent,r=o.handler.bind(o,r)),e.addEventListener(n,r,a),new i(e,n,r,a)}},{key:"once",value:function(e,t,n){var i=this.on(e,t,function(){return i.removeListener(),n.apply(this,arguments)});return i}},{key:"registerCustomEvent",value:function(e,t){s.customEvents[e]=t}},{key:"removeChildren",value:function(e){for(var t;t=e.firstChild;)e.removeChild(t)}},{key:"removeClasses",value:function(e,n){t.isObject(e)&&t.isString(n)&&("classList"in e?s.removeClassesWithNative_(e,n):s.removeClassesWithoutNative_(e,n))}},{key:"removeClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){e.classList.remove(t)})}},{key:"removeClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var i=0;i<t.length;i++)n=n.replace(" "+t[i]+" "," ");e.className=n.trim()}},{key:"replace",value:function(e,t){e&&t&&e!==t&&e.parentNode&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))}},{key:"stopImmediatePropagation_",value:function(){this.stopped=!0,Event.prototype.stopImmediatePropagation.call(this)}},{key:"stopPropagation_",value:function(){this.stopped=!0,Event.prototype.stopPropagation.call(this)}},{key:"supportsEvent",value:function(e,n){return s.customEvents[n]?!0:(t.isString(e)&&(r[e]||(r[e]=document.createElement(e)),e=r[e]),"on"+n in e)}},{key:"toElement",value:function(e){return t.isElement(e)||t.isDocument(e)?e:t.isString(e)?"#"===e[0]&&-1===e.indexOf(" ")?document.getElementById(e.substr(1)):document.querySelector(e):null}},{key:"toggleClasses",value:function(e,n){t.isObject(e)&&t.isString(n)&&("classList"in e?s.toggleClassesWithNative_(e,n):s.toggleClassesWithoutNative_(e,n))}},{key:"toggleClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){e.classList.toggle(t)})}},{key:"toggleClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var i=0;i<t.length;i++){var s=" "+t[i]+" ",r=n.indexOf(s);n=-1===r?n+t[i]+" ":n.substring(0,r)+" "+n.substring(r+s.length)}e.className=n.trim()}},{key:"triggerEvent",value:function(e,t,i){var s=document.createEvent("HTMLEvents");s.initEvent(t,!0,!0),n.mixin(s,i),e.dispatchEvent(s)}}]),s}(),r={};s.customEvents={},this.steel.dom=s}.call(this),function(){var t=this.steel.core,n=function(){function n(){e.classCallCheck(this,n)}return e.createClass(n,null,[{key:"equal",value:function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return e.length===t.length}},{key:"firstDefinedValue",value:function(e){for(var t=0;t<e.length;t++)if(void 0!==e[t])return e[t]}},{key:"flatten",value:function(e,t){for(var i=t||[],s=0;s<e.length;s++)Array.isArray(e[s])?n.flatten(e[s],i):i.push(e[s]);return i}},{key:"remove",value:function(e,t){var i,s=e.indexOf(t);return(i=s>=0)&&n.removeAt(e,s),i}},{key:"removeAt",value:function(e,t){return 1===Array.prototype.splice.call(e,t,1).length}},{key:"slice",value:function(e,n,i){for(var s=[],r=t.isDef(i)?i:e.length,a=n;r>a;a++)s.push(e[a]);return s}}]),n}();this.steel.array=n}.call(this),function(){var t=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"collapseBreakingSpaces",value:function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}},{key:"hashCode",value:function(e){for(var t=0,n=0,i=e.length;i>n;n++)t=31*t+e.charCodeAt(n),t%=4294967296;return t}},{key:"replaceInterval",value:function(e,t,n,i){return e.substring(0,t)+i+e.substring(n)}}]),t}();this.steel.string=t}.call(this),function(){var t=this.steel.dom,n=this.steel.string,i=function(){function i(){e.classCallCheck(this,i)}return e.createClass(i,null,[{key:"checkAnimationEventName",value:function(){return void 0===i.animationEventName_&&(i.animationEventName_={animation:i.checkAnimationEventName_("animation"),transition:i.checkAnimationEventName_("transition")}),i.animationEventName_}},{key:"checkAnimationEventName_",value:function(e){for(var t=["Webkit","MS","O",""],s=n.replaceInterval(e,0,1,e.substring(0,1).toUpperCase()),r=[s+"End",s+"End",s+"End",e+"end"],a=0;a<t.length;a++)if(void 0!==i.animationElement_.style[t[a]+s])return t[a].toLowerCase()+r[a];return e+"end"}},{key:"checkAttrOrderChange",value:function(){if(void 0===i.attrOrderChange_){var e='<div data-component="" data-ref=""></div>',n=document.createElement("div");t.append(n,e),i.attrOrderChange_=e!==n.innerHTML}return i.attrOrderChange_}}]),i}();i.animationElement_=document.createElement("div"),i.animationEventName_=void 0,i.attrOrderChange_=void 0,this.steel.features=i}.call(this),function(){var t=this.steel.dom,n=function(){function n(){e.classCallCheck(this,n)}return e.createClass(n,null,[{key:"run",value:function(e){var t=document.createElement("script");t.text=e,document.head.appendChild(t).parentNode.removeChild(t)}},{key:"runFile",value:function(e){var n=document.createElement("script");n.src=e,t.on(n,"load",function(){n.parentNode.removeChild(n)}),t.on(n,"error",function(){n.parentNode.removeChild(n)}),document.head.appendChild(n)}},{key:"runScript",value:function(e){e.parentNode&&e.parentNode.removeChild(e),e.src?n.runFile(e.src):n.run(e.text)}}]),n}();this.steel.globalEval=n}.call(this),function(){var t=this.steel.core,n=this.steel.string,i=function(){function i(){e.classCallCheck(this,i)}return e.createClass(i,null,[{key:"compress",value:function(e){var t={};return e=i.preserveBlocks_(e,t),e=i.simplifyDoctype_(e),e=i.removeComments_(e),e=i.removeIntertagSpaces_(e),e=i.collapseBreakingSpaces_(e),e=i.removeSpacesInsideTags_(e),e=i.removeSurroundingSpaces_(e),e=i.returnBlocks_(e,t),e.trim()}},{key:"collapseBreakingSpaces_",value:function(e){return n.collapseBreakingSpaces(e)}},{key:"lookupPossibleTagBoundary_",value:function(e,t){var n=e.indexOf(t);return n>-1&&(n+=e.substring(n).indexOf(">")+1),n}},{key:"preserveBlocks_",value:function(e,t){return e=i.preserveOuterHtml_(e,"<!--[if","<![endif]-->",t),e=i.preserveInnerHtml_(e,"<code","</code",t),e=i.preserveInnerHtml_(e,"<pre","</pre",t),e=i.preserveInnerHtml_(e,"<script","</script",t),e=i.preserveInnerHtml_(e,"<style","</style",t),e=i.preserveInnerHtml_(e,"<textarea","</textarea",t)}},{key:"preserveInnerHtml_",value:function(e,t,n,s){for(var r=i.lookupPossibleTagBoundary_(e,t);r>-1;){var a=e.indexOf(n);e=i.preserveInterval_(e,r,a,s),e=e.replace(t,"%%%~1~%%%"),e=e.replace(n,"%%%~2~%%%"),r=i.lookupPossibleTagBoundary_(e,t)}return e=e.replace(/%%%~1~%%%/g,t),e=e.replace(/%%%~2~%%%/g,n)}},{key:"preserveInterval_",value:function(e,i,s,r){var a="%%%~BLOCK~"+t.getUid()+"~%%%";return r[a]=e.substring(i,s),n.replaceInterval(e,i,s,a)}},{key:"preserveOuterHtml_",value:function(e,t,n,s){for(var r=e.indexOf(t);r>-1;){var a=e.indexOf(n)+n.length;e=i.preserveInterval_(e,r,a,s),r=e.indexOf(t)}return e}},{key:"removeComments_",value:function(e){var t={};return e=i.preserveOuterHtml_(e,"<![CDATA[","]]>",t),e=i.preserveOuterHtml_(e,"<!--","-->",t),e=i.replacePreservedBlocks_(e,t,"")}},{key:"removeIntertagSpaces_",value:function(e){return e=e.replace(i.Patterns.INTERTAG_CUSTOM_CUSTOM,"~%%%%%%~"),e=e.replace(i.Patterns.INTERTAG_CUSTOM_TAG,"~%%%<"),e=e.replace(i.Patterns.INTERTAG_TAG,"><"),e=e.replace(i.Patterns.INTERTAG_TAG_CUSTOM,">%%%~")}},{key:"removeSpacesInsideTags_",value:function(e){return e=e.replace(i.Patterns.TAG_END_SPACES,"$1$2"),e=e.replace(i.Patterns.TAG_QUOTE_SPACES,"=$1$2$3")}},{key:"removeSurroundingSpaces_",value:function(e){return e.replace(i.Patterns.SURROUNDING_SPACES,"$1")}},{key:"replacePreservedBlocks_",value:function(e,t,n){for(var i in t)e=e.replace(i,n);return e}},{key:"simplifyDoctype_",value:function(e){var t={};return e=i.preserveOuterHtml_(e,"<!DOCTYPE",">",t),e=i.replacePreservedBlocks_(e,t,"<!DOCTYPE html>")}},{key:"returnBlocks_",value:function(e,t){for(var n in t)e=e.replace(n,t[n]);return e}}]),i}();i.Patterns={INTERTAG_CUSTOM_CUSTOM:/~%%%\s+%%%~/g,INTERTAG_TAG_CUSTOM:/>\s+%%%~/g,INTERTAG_CUSTOM_TAG:/~%%%\s+</g,INTERTAG_TAG:/>\s+</g,SURROUNDING_SPACES:/\s*(<[^>]+>)\s*/g,TAG_END_SPACES:/(<(?:[^>]+?))(?:\s+?)(\/?>)/g,TAG_QUOTE_SPACES:/\s*=\s*(["']?)\s*(.*?)\s*(\1)/g},this.steel.html=i}.call(this),function(){var t=this.steel.core,n=this.steel.array,i=this.steel.Disposable,s=this.steel.EventHandle,r=function(i){function r(){e.classCallCheck(this,r);var t=e.possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));return t.events_=[],t.maxListeners_=10,t.shouldUseFacade_=!1,t}return e.inherits(r,i),e.createClass(r,[{key:"addListener",value:function(e,t,n){this.validateListener_(t),e=this.normalizeEvents_(e);for(var i=0;i<e.length;i++)this.addSingleListener_(e[i],t,n);return new s(this,e,t)}},{key:"addSingleListener_",value:function(e,t,n,i){this.emit("newListener",e,t),this.events_[e]||(this.events_[e]=[]),this.events_[e].push({"default":n,fn:t,origin:i});var s=this.events_[e];s.length>this.maxListeners_&&!s.warned&&(s.warned=!0)}},{key:"disposeInternal",value:function(){this.events_=[]}},{key:"emit",value:function(e){var t,i=n.slice(arguments,1),s=(this.events_[e]||[]).concat();this.getShouldUseFacade()&&(t={preventDefault:function(){t.preventedDefault=!0},target:this,type:e},i.push(t));for(var r=[],a=0;a<s.length;a++)s[a]["default"]?r.push(s[a]):s[a].fn.apply(this,i);if(!t||!t.preventedDefault)for(var o=0;o<r.length;o++)r[o].fn.apply(this,i);return"*"!==e&&this.emit.apply(this,["*",e].concat(i)),s.length>0}},{key:"getShouldUseFacade",value:function(){return this.shouldUseFacade_}},{key:"listeners",value:function(e){return(this.events_[e]||[]).map(function(e){return e.fn})}},{key:"many",value:function(e,t,n){e=this.normalizeEvents_(e);for(var i=0;i<e.length;i++)this.many_(e[i],t,n);return new s(this,e,n)}},{key:"many_",value:function(e,t,n){function i(){0===--t&&s.removeListener(e,i),n.apply(s,arguments)}var s=this;0>=t||s.addSingleListener_(e,i,!1,n)}},{key:"matchesListener_",value:function(e,t){return e.fn===t||e.origin&&e.origin===t}},{key:"normalizeEvents_",value:function(e){return t.isString(e)?[e]:e}},{key:"off",value:function(e,t){this.validateListener_(t),e=this.normalizeEvents_(e);for(var n=0;n<e.length;n++){var i=this.events_[e[n]]||[];this.removeMatchingListenerObjs_(i,t)}return this}},{key:"on",value:function(){return this.addListener.apply(this,arguments)}},{key:"once",value:function(e,t){return this.many(e,1,t)}},{key:"removeAllListeners",value:function(e){if(e)for(var t=this.normalizeEvents_(e),n=0;n<t.length;n++)this.events_[t[n]]=null;else this.events_={};return this}},{key:"removeMatchingListenerObjs_",value:function(e,t){for(var n=e.length-1;n>=0;n--)this.matchesListener_(e[n],t)&&e.splice(n,1)}},{key:"removeListener",value:function(){return this.off.apply(this,arguments)}},{key:"setMaxListeners",value:function(e){return this.maxListeners_=e,this}},{key:"setShouldUseFacade",value:function(e){return this.shouldUseFacade_=e,this}},{key:"validateListener_",value:function(e){if(!t.isFunction(e))throw new TypeError("Listener must be a function")}}]),r}(i);this.steel.EventEmitter=r}.call(this),function(){var e=this.steel.core,t={};t.throwException=function(e){t.nextTick(function(){throw e})},t.run=function(e,n){t.run.workQueueScheduled_||(t.nextTick(t.run.processWorkQueue),t.run.workQueueScheduled_=!0),t.run.workQueue_.push(new t.run.WorkItem_(e,n))},t.run.workQueueScheduled_=!1,t.run.workQueue_=[],t.run.processWorkQueue=function(){for(;t.run.workQueue_.length;){var e=t.run.workQueue_;t.run.workQueue_=[];for(var n=0;n<e.length;n++){var i=e[n];try{i.fn.call(i.scope)}catch(s){t.throwException(s)}}}t.run.workQueueScheduled_=!1},t.run.WorkItem_=function(e,t){this.fn=e,this.scope=t},t.nextTick=function(n,i){var s=n;return i&&(s=n.bind(i)),s=t.nextTick.wrapCallback_(s),e.isFunction(window.setImmediate)?void window.setImmediate(s):(t.nextTick.setImmediate_||(t.nextTick.setImmediate_=t.nextTick.getSetImmediateEmulator_()),void t.nextTick.setImmediate_(s))},t.nextTick.setImmediate_=null,t.nextTick.getSetImmediateEmulator_=function(){var e=window.MessageChannel;if("undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(e=function(){var e=document.createElement("iframe");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow,n=t.document;n.open(),n.write(""),n.close();var i="callImmediate"+Math.random(),s=t.location.protocol+"//"+t.location.host,r=function(e){(e.origin===s||e.data===i)&&this.port1.onmessage()}.bind(this);t.addEventListener("message",r,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(i,s)}}}),"undefined"!=typeof e){var t=new e,n={},i=n;return t.port1.onmessage=function(){n=n.next;var e=n.cb;n.cb=null,e()},function(e){i.next={cb:e},i=i.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(e){var t=document.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){setTimeout(e,0)}},t.nextTick.wrapCallback_=function(e){return e},this.steel.async=t}.call(this),function(){var t=this.steel.array,n=this.steel.core,i=this.steel.object,s=this.steel.EventEmitter,r=this.steel.async,a=function(s){function a(t){e.classCallCheck(this,a);var n=e.possibleConstructorReturn(this,Object.getPrototypeOf(a).call(this));return n.scheduledBatchData_=null,n.attrsInfo_={},n.setShouldUseFacade(!0),n.mergeInvalidAttrs_(),n.addAttrsFromStaticHint_(t),n}return e.inherits(a,s),e.createClass(a,[{key:"addAttr",value:function(e,t,n){this.buildAttrInfo_(e,t,n),Object.defineProperty(this,e,this.buildAttrPropertyDef_(e))}},{key:"addAttrs",value:function(e,t,n){t=t||{};for(var i=Object.keys(e),s={},r=0;r<i.length;r++){var a=i[r];this.buildAttrInfo_(a,e[a],t[a]),s[a]=this.buildAttrPropertyDef_(a)}n!==!1&&Object.defineProperties(n||this,s)}},{key:"addAttrsFromStaticHint_",value:function(e){var t=this.constructor,n=!1;a.mergeAttrsStatic(t)&&(n=t.prototype),this.addAttrs(t.ATTRS_MERGED,e,n)}},{key:"assertValidAttrName_",value:function(e){if(this.constructor.INVALID_ATTRS_MERGED[e])throw new Error("It's not allowed to create an attribute with the name \""+e+'".')}},{key:"buildAttrInfo_",value:function(e,t,n){this.assertValidAttrName_(e),this.attrsInfo_[e]={config:t||{},initialValue:n,state:a.States.UNINITIALIZED}}},{key:"buildAttrPropertyDef_",value:function(e){return{configurable:!0,enumerable:!0,get:function(){return this.getAttrValue_(e)},set:function(t){this.setAttrValue_(e,t)}}}},{key:"callFunction_",value:function(e,t){return n.isString(e)?this[e].apply(this,t):n.isFunction(e)?e.apply(this,t):void 0}},{key:"callSetter_",value:function(e,t){var n=this.attrsInfo_[e],i=n.config;return i.setter&&(t=this.callFunction_(i.setter,[t])),t}},{key:"callValidator_",value:function(e,t){var n=this.attrsInfo_[e],i=n.config;return i.validator?this.callFunction_(i.validator,[t]):!0}},{key:"canSetAttribute",value:function(e){var t=this.attrsInfo_[e];return!t.config.writeOnce||!t.written}},{key:"disposeInternal",value:function(){e.get(Object.getPrototypeOf(a.prototype),"disposeInternal",this).call(this),this.attrsInfo_=null,this.scheduledBatchData_=null}},{key:"emitBatchEvent_",value:function(){if(!this.isDisposed()){var e=this.scheduledBatchData_;this.scheduledBatchData_=null,this.emit("attrsChanged",e)}}},{key:"get",value:function(e){return this[e]}},{key:"getAttrConfig",value:function(e){return(this.attrsInfo_[e]||{}).config}},{key:"getAttrs",value:function(e){for(var t={},n=e||this.getAttrNames(),i=0;i<n.length;i++)t[n[i]]=this[n[i]];return t}},{key:"getAttrNames",value:function(){return Object.keys(this.attrsInfo_)}},{key:"getAttrValue_",value:function(e){return this.initAttr_(e),this.attrsInfo_[e].value}},{key:"informChange_",value:function(e,t){if(this.shouldInformChange_(e,t)){var n={attrName:e,newVal:this[e],prevVal:t};this.emit(e+"Changed",n),this.scheduleBatchEvent_(n)}}},{key:"initAttr_",value:function(e){var t=this.attrsInfo_[e];t.state===a.States.UNINITIALIZED&&(t.state=a.States.INITIALIZING,this.setInitialValue_(e),t.written||(t.state=a.States.INITIALIZING_DEFAULT,this.setDefaultValue_(e)),t.state=a.States.INITIALIZED)}},{key:"mergeInvalidAttrs_",value:function(){n.mergeSuperClassesProperty(this.constructor,"INVALID_ATTRS",function(e){return t.flatten(e).reduce(function(e,t){return t&&(e[t]=!0),e},{})})}},{key:"removeAttr",value:function(e){this.attrsInfo_[e]=null,delete this[e]}},{key:"scheduleBatchEvent_",value:function(e){this.scheduledBatchData_||(r.nextTick(this.emitBatchEvent_,this),this.scheduledBatchData_={changes:{}});var t=e.attrName,n=this.scheduledBatchData_.changes;n[t]?n[t].newVal=e.newVal:n[t]=e}},{key:"set",value:function(e,t){this[e]=t}},{key:"setAttrs",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)this[t[n]]=e[t[n]]}},{key:"setAttrValue_",value:function(e,t){if(this.canSetAttribute(e)&&this.validateAttrValue_(e,t)){var n=this.attrsInfo_[e];void 0===n.initialValue&&n.state===a.States.UNINITIALIZED&&(n.state=a.States.INITIALIZED);var i=this[e];n.value=this.callSetter_(e,t),n.written=!0,this.informChange_(e,i)}}},{key:"setDefaultValue_",value:function(e){var t=this.attrsInfo_[e].config;void 0!==t.value?this[e]=t.value:this[e]=this.callFunction_(t.valueFn)}},{key:"setInitialValue_",value:function(e){var t=this.attrsInfo_[e];void 0!==t.initialValue&&(this[e]=t.initialValue,t.initialValue=void 0)}},{key:"shouldInformChange_",value:function(e,t){var i=this.attrsInfo_[e];return i.state===a.States.INITIALIZED&&(n.isObject(t)||t!==this[e])}},{key:"validateAttrValue_",value:function(e,t){var n=this.attrsInfo_[e];return n.state===a.States.INITIALIZING_DEFAULT||this.callValidator_(e,t)}}],[{key:"mergeAttrs_",value:function(e){return i.mixin.apply(null,[{}].concat(e.reverse()))}},{key:"mergeAttrsStatic",value:function(e){return n.mergeSuperClassesProperty(e,"ATTRS",a.mergeAttrs_)}}]),a}(s);a.INVALID_ATTRS=["attrs"],a.States={UNINITIALIZED:0,INITIALIZING:1,INITIALIZING_DEFAULT:2,INITIALIZED:3},this.steel.Attribute=a}.call(this),function(){var t=this.steel.core,n=function(){function n(){e.classCallCheck(this,n)}return e.createClass(n,null,[{key:"getConstructor",value:function(e){var t=n.components_[e];return t}},{key:"register",value:function(e,i){var s=i;s||(s=e.hasOwnProperty("NAME")?e.NAME:t.getFunctionName(e)),e.NAME=s,n.components_[s]=e}}]),n}();n.components_={},this.steel.ComponentRegistry=n}.call(this),function(){var t=this.steel.ComponentRegistry,n=this.steel.Disposable,i=function(n){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,n),e.createClass(i,[{key:"addComponent",value:function(e){i.components[e.id]=e}},{key:"createComponent",value:function(e,n,s){var r=i.components[n];if(!r){var a=t.getConstructor(e),o=s||{};o.id=n,o.element="#"+n,r=new a(o)}return r}},{key:"removeComponent",value:function(e){delete i.components[e.id]}},{key:"updateComponent",value:function(e,t){var n=i.components[e];return n&&t&&n.setAttrs(t),n}}]),i}(n);i.components={},this.steel.ComponentCollector=i}.call(this),function(){var t=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"getSurfaceContent",value:function(){}}]),t}();this.steel.ComponentRenderer=t}.call(this),function(){var t=this.steel.core,n=this.steel.dom,i=this.steel.Disposable,s=function(i){function s(t,n,i,r){e.classCallCheck(this,s);var a=e.possibleConstructorReturn(this,Object.getPrototypeOf(s).call(this));return a.blacklist_=i||{},a.originEmitter_=t,a.proxiedEvents_={},a.targetEmitter_=n,a.whitelist_=r,a.startProxy_(),a}return e.inherits(s,i),e.createClass(s,[{key:"disposeInternal",value:function(){var e=this.originEmitter_.removeEventListener?"removeEventListener":"removeListener";for(var t in this.proxiedEvents_)this.originEmitter_[e](t,this.proxiedEvents_[t]);this.proxiedEvents_=null,this.originEmitter_=null,this.targetEmitter_=null}},{key:"proxyEvent_",value:function(e){if(this.shouldProxyEvent_(e)){var i=this;this.proxiedEvents_[e]=function(){var t=[e].concat(Array.prototype.slice.call(arguments,0));i.targetEmitter_.emit.apply(i.targetEmitter_,t)},t.isElement(this.originEmitter_)||t.isDocument(this.originEmitter_)?n.on(this.originEmitter_,e,this.proxiedEvents_[e]):this.originEmitter_.on(e,this.proxiedEvents_[e])}}},{key:"shouldProxyEvent_",value:function(e){return this.whitelist_&&!this.whitelist_[e]?!1:this.blacklist_[e]?!1:!this.proxiedEvents_[e]&&(!(this.originEmitter_.removeEventListener||this.originEmitter_.addEventListener)||n.supportsEvent(this.originEmitter_,e))}},{key:"startProxy_",value:function(){this.targetEmitter_.on("newListener",this.proxyEvent_.bind(this))}}]),s}(i);this.steel.EventEmitterProxy=s}.call(this),function(){var t=this.steel.Disposable,n=function(t){function n(){e.classCallCheck(this,n);var t=e.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this));return t.eventHandles_=[],t}return e.inherits(n,t),e.createClass(n,[{key:"add",value:function(){for(var e=0;e<arguments.length;e++)this.eventHandles_.push(arguments[e])}},{key:"disposeInternal",value:function(){this.eventHandles_=null}},{key:"removeAllListeners",value:function(){for(var e=0;e<this.eventHandles_.length;e++)this.eventHandles_[e].removeListener();this.eventHandles_=[]}}]),n}(t);this.steel.EventHandler=n}.call(this),function(){var t=this.steel.core,n=this.steel.ComponentCollector,i=this.steel.Disposable,s=this.steel.EventHandler,r=function(i){function r(t){e.classCallCheck(this,r);var n=e.possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));if(!t)throw new Error("The component instance is mandatory");return n.component_=t,n.eventHandles_={},n.groupHasListener_={},n}return e.inherits(r,i),e.createClass(r,[{key:"attachListener_",value:function(e,t,n){var i="[data-on"+e+'="'+t+'"]';if(this.groupHasListener_[n][i]=!0,!this.eventHandles_[i]){this.eventHandles_[i]=new s;for(var r=t.split(","),a=0;a<r.length;a++){var o=this.getListenerFn(r[a]);o&&this.eventHandles_[i].add(this.component_.delegate(e,i,this.onEvent_.bind(this,o)))}}}},{key:"attachListeners",value:function(e,t){this.groupHasListener_[t]={},this.attachListenersFromHtml_(e,t)}},{key:"attachListenersFromHtml_",value:function(e,t){if(-1!==e.indexOf("data-on"))for(var n=/data-on([a-z]+)=['"]([^'"]+)['"]/g,i=n.exec(e);i;)this.attachListener_(i[1],i[2],t),i=n.exec(e)}},{key:"detachAllListeners",value:function(){for(var e in this.eventHandles_)this.eventHandles_[e]&&this.eventHandles_[e].removeAllListeners();this.eventHandles_={},this.listenerCounts_={}}},{key:"detachUnusedListeners",value:function(){for(var e in this.eventHandles_)if(this.eventHandles_[e]){var t=!0;for(var n in this.groupHasListener_)if(this.groupHasListener_[n][e]){t=!1;break}t&&(this.eventHandles_[e].removeAllListeners(),this.eventHandles_[e]=null)}}},{key:"disposeInternal",value:function(){this.detachAllListeners(),this.component_=null}},{key:"getListenerFn",value:function(e){var i,s=e.split(":");return 2===s.length&&(e=s[1],i=n.components[s[0]]),i=i||this.component_,t.isFunction(i[e])?i[e].bind(i):void 0}},{key:"hasAttachedForGroup",value:function(e){return!!this.groupHasListener_.hasOwnProperty(e)}},{key:"onEvent_",value:function(e,t){var n=t.handledByComponent;return!n||n===this.component_||t.delegateTarget.contains(n.element)?(t.handledByComponent=this.component_,e(t)):void 0}}]),r}(i);this.steel.EventsCollector=r}.call(this),function(){var t=this.steel.object,n=this.steel.Disposable,i=function(n){function i(){e.classCallCheck(this,i);var t=e.possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this));return t.surfaces_={},t}return e.inherits(i,n),e.createClass(i,[{key:"addSurface",value:function(e,t){this.surfaces_[e]?this.updateSurface(e,t):(this.surfaces_[e]=t||{},this.surfaces_[e].surfaceElementId=e)}},{key:"disposeInternal",value:function(){this.surfaces_=null}},{key:"getSurface",value:function(e){return this.surfaces_[e]?this.surfaces_[e]:null}},{key:"removeAllSurfaces",value:function(){this.surfaces_=[]}},{key:"removeSurface",value:function(e){this.surfaces_[e]=null}},{key:"updateSurface",value:function(e,n){t.mixin(this.surfaces_[e],n)}}]),i}(n);this.steel.SurfaceCollector=i}.call(this),function(){var t=this.steel.array,n=this.steel.core,i=this.steel.dom,s=this.steel.features,r=this.steel.globalEval,a=this.steel.html,o=this.steel.object,l=this.steel.string,u=this.steel.Attribute,c=this.steel.ComponentCollector,h=this.steel.ComponentRenderer,d=this.steel.EventEmitterProxy,f=this.steel.EventHandler,m=this.steel.EventsCollector,v=this.steel.SurfaceCollector,p=function(u){
function h(i){e.classCallCheck(this,h);var s=e.possibleConstructorReturn(this,Object.getPrototypeOf(h).call(this,i));return s.collectedSurfaces_=[],s.components={},s.decorating_=!1,s.delegateEventHandler_=null,s.elementEventProxy_=null,s.eventsAttrHandler_=new f,s.eventsCollector_=new m(s),s.generatedIdCount_={},s.inDocument=!1,s.initialConfig_=i||{},s.removedSurfaces_=[],s.surfaceIds_={},s.wasRendered=!1,s.DEFAULT_ELEMENT_PARENT=document.body,n.mergeSuperClassesProperty(s.constructor,"ELEMENT_CLASSES",s.mergeElementClasses_),n.mergeSuperClassesProperty(s.constructor,"ELEMENT_TAG_NAME",t.firstDefinedValue),n.mergeSuperClassesProperty(s.constructor,"RENDERER",t.firstDefinedValue),n.mergeSuperClassesProperty(s.constructor,"SURFACE_TAG_NAME",t.firstDefinedValue),s.addSurfacesFromStaticHint_(),s.delegateEventHandler_=new f,s.created_(),s}return e.inherits(h,u),e.createClass(h,[{key:"addListenersFromObj_",value:function(e){for(var t=Object.keys(e||{}),n=0;n<t.length;n++){var i=this.extractListenerInfo_(e[t[n]]);if(i.fn){var s;s=i.selector?this.delegate(t[n],i.selector,i.fn):this.on(t[n],i.fn),this.eventsAttrHandler_.add(s)}}}},{key:"addMissingAttr_",value:function(e,t){this.getAttrConfig(e)||this.addAttr(e,{},t)}},{key:"addSingleListener_",value:function(t,n,s){!this.elementEventProxy_&&i.supportsEvent(this.constructor.ELEMENT_TAG_NAME_MERGED,t)&&(this.elementEventProxy_=new d(this.element,this)),e.get(Object.getPrototypeOf(h.prototype),"addSingleListener_",this).call(this,t,n,s)}},{key:"addElementSurface_",value:function(){this.surfaceIds_[this.id]||this.addSurface(this.id,{componentName:this.getName()})}},{key:"addSurface",value:function(e,t){var n=t||{},i=this.getSurfaceElementId(e,n);return this.surfaceIds_[i]?h.surfacesCollector.updateSurface(i,n):(this.surfaceIds_[i]=!0,n.cacheState=n.cacheState||h.Cache.NOT_INITIALIZED,h.surfacesCollector.addSurface(i,n),n.componentName&&e!==this.id&&this.createSubComponent_(n.componentName,i)),this.cacheSurfaceRenderAttrs_(i,n.renderAttrs),this}},{key:"addSurfaces",value:function(e){for(var t in e)this.addSurface(t,e[t]);return this}},{key:"addSurfacesFromStaticHint_",value:function(){n.mergeSuperClassesProperty(this.constructor,"SURFACES",this.mergeObjects_),this.surfacesRenderAttrs_={};var e=this.constructor.SURFACES_MERGED;for(var t in e)this.addSurface(t,o.mixin({},e[t]))}},{key:"addToRemovedSurfaces_",value:function(e){for(var t=0;t<e.length;t++){var n=this.getSurface(e[t]);this.removedSurfaces_.push(n),n.parent=null}}},{key:"attach",value:function(e,t){return this.inDocument||(this.renderElement_(e,t),this.inDocument=!0,this.wasRendered||this.updatePlaceholderSurfaces_(),this.attached()),this}},{key:"attached",value:function(){}},{key:"buildFragment_",value:function(e){var t=i.buildFragment(e);if(-1===e.indexOf("<script"))return t;for(var n=t.querySelectorAll("script"),s=0;s<n.length;s++){var a=n.item(s);a.type&&"text/javascript"!==a.type||r.runScript(a)}return t}},{key:"buildPlaceholder",value:function(e,t){return e&&t&&(t.surfaceElementId=e,this.addSurface(e,t)),"%%%%~s"+(e?"-"+e:"")+"~%%%%"}},{key:"cacheSurfaceContent",value:function(e,t){var n=this.computeSurfaceCacheState_(t),i=this.getSurfaceFromElementId(e);i.cacheState=n}},{key:"cacheSurfaceRenderAttrs_",value:function(e,t){for(var n=t||[],i=0;i<n.length;i++)this.surfacesRenderAttrs_[n[i]]||(this.surfacesRenderAttrs_[n[i]]={},this.addMissingAttr_(n[i],this.initialConfig_[n[i]])),this.surfacesRenderAttrs_[n[i]][e]=!0}},{key:"checkHasElementTag_",value:function(e,t){return-1!==e.indexOf(' id="'+t+'"')}},{key:"clearSurfaceCache",value:function(e){this.getSurface(e).cacheState=h.Cache.NOT_INITIALIZED}},{key:"compareCacheStates_",value:function(e,t){return e!==h.Cache.NOT_INITIALIZED&&e===t}},{key:"computeSurfaceCacheState_",value:function(e){return e=e||"",s.checkAttrOrderChange()&&(e=this.convertHtmlToBrowserFormat_(e)),l.hashCode(e)}},{key:"convertHtmlToBrowserFormat_",value:function(e){var t=document.createElement("div");return i.append(t,e),t.innerHTML}},{key:"createPlaceholderSurface_",value:function(e,t){var i=t;n.isDefAndNotNull(i)||(i=this.generateSurfaceElementId(e));var s=this.getSurfaceFromElementId(i);return s||(s={surfaceElementId:i},this.addSurface(i,s)),s}},{key:"createSubComponent_",value:function(e,t){return this.components[t]=h.componentsCollector.createComponent(e,t,this.getSurfaceFromElementId(t).componentData),this.components[t]}},{key:"createSurfaceElement_",value:function(e){var t=document.createElement(this.constructor.SURFACE_TAG_NAME_MERGED);return t.id=e,t}},{key:"decorateAsSubComponent",value:function(e){this.decorating_=!0,this.renderAsSubComponent(e),this.decorating_=!1}},{key:"delegate",value:function(e,t,n){var s=i.delegate(this.element,e,t,n);return this.delegateEventHandler_.add(s),s}},{key:"detach",value:function(){return this.inDocument&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.inDocument=!1,this.detached()),this.eventsCollector_.detachAllListeners(),this}},{key:"detached",value:function(){}},{key:"created_",value:function(){this.on("eventsChanged",this.onEventsChanged_),this.addListenersFromObj_(this.events),this.on("attrsChanged",this.handleAttributesChanges_),h.componentsCollector.addComponent(this),this.on("renderSurface",this.defaultRenderSurfaceFn_,!0)}},{key:"decorate",value:function(){return this.decorating_=!0,this.render(),this.decorating_=!1,this}},{key:"defaultRenderSurfaceFn_",value:function(e){var t=e.surfaceElementId,n=this.getSurfaceFromElementId(t);if(n.componentName&&t!==this.id)return void this.renderComponentSurface_(t,e.content);var i=e.content||this.getSurfaceContent_(t),s=e.cacheContent||i,r=n["static"];if(!n["static"]){var a=n.cacheState;this.cacheSurfaceContent(t,s),r=this.compareCacheStates_(n.cacheState,a)}r?this.renderPlaceholderSurfaceContents_(s,t):(this.eventsCollector_.attachListeners(s,t),this.replaceSurfaceContent_(t,n,i))}},{key:"disposeSubComponents_",value:function(e){for(var t=0;t<e.length;t++){var n=this.components[e[t]];n.isDisposed()||(h.componentsCollector.removeComponent(n),n.dispose(),delete this.components[e[t]])}}},{key:"disposeInternal",value:function(){var t=this;this.detach(),this.elementEventProxy_&&(this.elementEventProxy_.dispose(),this.elementEventProxy_=null),this.delegateEventHandler_.removeAllListeners(),this.delegateEventHandler_=null,this.disposeSubComponents_(Object.keys(this.components)),this.components=null,this.generatedIdCount_=null,this.surfacesRenderAttrs_=null,this.eventsCollector_.dispose(),this.eventsCollector_=null,Object.keys(this.surfaceIds_).forEach(function(e){return t.removeSurface(e)}),this.surfaceIds_=null,e.get(Object.getPrototypeOf(h.prototype),"disposeInternal",this).call(this)}},{key:"emitRenderSurfaceEvent_",value:function(e,t,n,i){this.emit("renderSurface",{cacheContent:n,content:t,renderAttrs:i||[],surfaceElementId:e,surfaceId:this.getSurfaceId(this.getSurfaceFromElementId(e))})}},{key:"extractListenerInfo_",value:function(e){var t={fn:e};return n.isObject(e)&&!n.isFunction(e)&&(t.selector=e.selector,t.fn=e.fn),n.isString(t.fn)&&(t.fn=this.eventsCollector_.getListenerFn(t.fn)),t}},{key:"syncAttrs_",value:function(){for(var e=this.getAttrNames(),t=0;t<e.length;t++)this.fireAttrChange_(e[t])}},{key:"syncAttrsFromChanges_",value:function(e){for(var t in e)this.fireAttrChange_(t,e[t])}},{key:"findElementById_",value:function(e){return document.getElementById(e)||this.element&&this.element.querySelector("#"+e)}},{key:"findElementInContent_",value:function(e,t){t=n.isString(t)?i.buildFragment(t):t;var s=t.childNodes[0];return s&&s.id===e?s:void 0}},{key:"fireAttrChange_",value:function(e,t){var i=this["sync"+e.charAt(0).toUpperCase()+e.slice(1)];n.isFunction(i)&&(t||(t={newVal:this[e],prevVal:void 0}),i.call(this,t.newVal,t.prevVal))}},{key:"generateSurfaceElementId",value:function(e){return this.generatedIdCount_[e]=(this.generatedIdCount_[e]||0)+1,e+"-s"+this.generatedIdCount_[e]}},{key:"getComponentHtml",value:function(e){return this.wrapContentIfNecessary(e,this.id,this.constructor.ELEMENT_TAG_NAME_MERGED)}},{key:"getComponentsWithPrefix",value:function(e){var t=this,n=Object.keys(this.components).filter(function(t){return 0===t.indexOf(e)}),i={};return n.forEach(function(e){return i[e]=t.components[e]}),i}},{key:"getName",value:function(){return this.constructor.NAME||n.getFunctionName(this.constructor)}},{key:"getElementContent_",value:function(e){return this.addElementSurface_(),this.getRenderer().getSurfaceContent(this.getSurface(this.id),this,e)}},{key:"getElementExtendedContent",value:function(){var e=this.getElementContent_()||"";return this.eventsCollector_.attachListeners(e,this.id),this.cacheSurfaceContent(this.id,e),this.replaceSurfacePlaceholders_(e,this.id,this.getSurface(this.id))}},{key:"getModifiedSurfacesFromChanges_",value:function(e){var t={};for(var n in e)for(var i=Object.keys(this.surfacesRenderAttrs_[n]||{}),s=0;s<i.length;s++)t[i[s]]||(t[i[s]]=[]),t[i[s]].push(n);return t}},{key:"getNonComponentSurfaceHtml",value:function(e,t){return this.wrapContentIfNecessary(t,e,this.constructor.SURFACE_TAG_NAME_MERGED)}},{key:"getRenderer",value:function(){return this.constructor.RENDERER_MERGED}},{key:"getSurface",value:function(e){var t=this.getSurfaceFromElementId(this.getSurfaceElementId(e));return t?t:this.getSurfaceFromElementId(e)}},{key:"getSurfaceContent_",value:function(e){var t=this.getSurfaceFromElementId(e);if(t.componentName&&e!==this.id){var n=c.components[e];return n.wasRendered?"":n.getElementExtendedContent()}return this.getRenderer().getSurfaceContent(t,this)||""}},{key:"getSurfaceElement",value:function(e,t){var n=t||this.getSurface(e);if(!n)return null;if(!n.element)if(n.componentName){var i=c.components[e];i&&(n.element=i.element)}else{var s=this.getSurfaceElementId(e,n);n.element=this.findElementById_(s)||this.createSurfaceElement_(s)}return n.element}},{key:"getSurfaceElementId",value:function(e,t){var n=t||{};return n.surfaceElementId?n.surfaceElementId:n.componentName||this.hasComponentPrefix_(e)?e:this.prefixSurfaceId(e)}},{key:"getSurfaceFromElementId",value:function(e){return h.surfacesCollector.getSurface(e)}},{key:"getSurfaceHtml_",value:function(e,t){var n=e.surfaceElementId;return e.componentName?c.components[n].getComponentHtml(t):this.getNonComponentSurfaceHtml(n,t)}},{key:"getSurfaceId",value:function(e){return e.componentName||!this.hasComponentPrefix_(e.surfaceElementId)?e.surfaceElementId:e.surfaceElementId.substr(this.id.length+1)}},{key:"getSurfaces",value:function(){var e={};return Object.keys(this.surfaceIds_).forEach(function(t){var n=this.getSurfaceFromElementId(t);e[this.getSurfaceId(n)]=n}.bind(this)),e}},{key:"handleAttributesChanges_",value:function(e){this.inDocument&&this.renderSurfacesContent_(this.getModifiedSurfacesFromChanges_(e.changes)),this.syncAttrsFromChanges_(e.changes),this.emit("attrsSynced",e)}},{key:"hasComponentPrefix_",value:function(e){return e.substr(0,this.id.length)===this.id&&(e.length===this.id.length||"-"===e[this.id.length])}},{key:"onEventsChanged_",value:function(e){this.eventsAttrHandler_.removeAllListeners(),this.addListenersFromObj_(e.newVal)}},{key:"makeId_",value:function(){return"metal_c_"+n.getUid(this)}},{key:"mergeElementClasses_",value:function(e){var t={};return e.filter(function(e){return!e||t[e]?!1:(t[e]=!0,!0)}).join(" ")}},{key:"mergeObjects_",value:function(e){return o.mixin.apply(null,[{}].concat(e.reverse()))}},{key:"prefixSurfaceId",value:function(e){return this.id+"-"+e}},{key:"removeSurface",value:function(e){var t=this.getSurfaceElement(e);t&&t.parentNode&&t.parentNode.removeChild(t);var n=this.getSurfaceElementId(e,this.getSurface(e));return h.surfacesCollector.removeSurface(n),this.surfaceIds_[n]=!1,this}},{key:"removeUnusedSurfaces_",value:function(){for(var e=[],t=0;t<this.removedSurfaces_.length;t++){var n=this.removedSurfaces_[t];n.parent||(this.removeSurface(n.surfaceElementId),n.componentName&&e.push(n.surfaceElementId))}this.disposeSubComponents_(e)}},{key:"render",value:function(e,t){if(this.wasRendered)throw new Error(h.Error.ALREADY_RENDERED);return this.addElementSurface_(),this.renderContent_(),this.syncAttrs_(),this.emit("render"),this.attach(e,t),this.wasRendered=!0,this}},{key:"renderAsSubComponent",value:function(e){this.addElementSurface_(),e&&i.isEmpty(this.element)&&this.replaceElementContent_(e),this.syncAttrs_(),this.attach(),this.wasRendered=!0}},{key:"renderComponentSurface_",value:function(e,t){var n=c.components[e];if(n.wasRendered){var i=this.getSurfaceFromElementId(e);h.componentsCollector.updateComponent(e,i.componentData)}else this.decorating_?n.decorateAsSubComponent(t):n.renderAsSubComponent(t)}},{key:"renderContent_",value:function(){var e=this.id;if(this.decorating_){var t=this.getElementExtendedContent(),n=this.computeSurfaceCacheState_(t),i=this.computeSurfaceCacheState_(a.compress(this.element.outerHTML));this.compareCacheStates_(i,n)||this.replaceElementContent_(t)}else this.emitRenderSurfaceEvent_(e)}},{key:"renderElement_",value:function(e,t){var n=this.element;if(n.id=this.id,t||!n.parentNode){var s=i.toElement(e)||this.DEFAULT_ELEMENT_PARENT;s.insertBefore(n,i.toElement(t))}}},{key:"renderPlaceholderSurfaceContents_",value:function(e,t){var n=this;e.replace(h.SURFACE_REGEX,function(e,i){var s=n.createPlaceholderSurface_(t,i);return n.emitRenderSurfaceEvent_(s.surfaceElementId),e})}},{key:"renderSurfacesContent_",value:function(e){this.generatedIdCount_={},this.removedSurfaces_=[];var t=Object.keys(e),n=t.indexOf(this.id);-1!==n&&(t.splice(n,1),t=[this.id].concat(t));for(var i=0;i<t.length;i++)this.getSurfaceFromElementId(t[i]).handled||this.emitRenderSurfaceEvent_(t[i],null,null,e[t[i]]);this.updatePlaceholderSurfaces_(),this.eventsCollector_.detachUnusedListeners(),this.removeUnusedSurfaces_()}},{key:"replaceElementContent_",value:function(e){var t=this.element,n=this.buildFragment_(e),s=this.findElementInContent_(this.id,n);s&&(this.updateElementAttributes_(t,s),n=s.childNodes),i.removeChildren(t),i.append(t,n)}},{key:"replaceSurfaceContent_",value:function(e,t,n){if(n=this.replaceSurfacePlaceholders_(n,e,t),e===this.id)return void this.replaceElementContent_(n);var s=this.getSurfaceElement(e),r=this.buildFragment_(n),a=this.findElementInContent_(e,r);a?(t.element=a,i.replace(s,t.element)):(i.removeChildren(s),i.append(s,r))}},{key:"replaceSurfacePlaceholders_",value:function(e,t,n){n.componentName&&t!==this.id||(this.addToRemovedSurfaces_(n.children||[]),n.children=[]);var i=this;return e.replace(h.SURFACE_REGEX,function(e,s){var r=i.createPlaceholderSurface_(t,s);s=r.surfaceElementId,r.handled=!0,r.parent=t,n.children.push(s);var a=i.getSurfaceContent_(s),o=i.getSurfaceHtml_(r,a),l=i.replaceSurfacePlaceholders_(o,s,r);return i.collectedSurfaces_.push({cacheContent:a,content:l,surface:r}),l})}},{key:"setterElementFn_",value:function(e){var t=i.toElement(e);return t||(t=this.valueElementFn_()),t}},{key:"syncElementClasses",value:function(e,t){var n=this.constructor.ELEMENT_CLASSES_MERGED;e&&(n=n+" "+e),t&&i.removeClasses(this.element,t),i.addClasses(this.element,n)}},{key:"syncVisible",value:function(e){this.element.style.display=e?"":"none"}},{key:"updateElementAttributes_",value:function(e,t){for(var n=t.attributes,i=0;i<n.length;i++)"id"!==n[i].name&&"class"!==n[i].name&&e.setAttribute(n[i].name,n[i].value);e.tagName!==t.tagName}},{key:"updatePlaceholderSurface_",value:function(e){var t=e.surface,n=t.surfaceElementId;t.componentName?(i.replace(this.findElementById_(n),this.getSurfaceElement(n,t)),this.emitRenderSurfaceEvent_(n,e.content,e.cacheContent)):(t.element=null,this.cacheSurfaceContent(n,e.cacheContent),this.eventsCollector_.attachListeners(e.cacheContent,n))}},{key:"updatePlaceholderSurfaces_",value:function(){for(var e=this.collectedSurfaces_.length-1;e>=0;e--)this.updatePlaceholderSurface_(this.collectedSurfaces_[e]),this.collectedSurfaces_[e].surface.handled=!1;this.collectedSurfaces_=[]}},{key:"validatorElementFn_",value:function(e){return n.isElement(e)||n.isString(e)}},{key:"validatorElementClassesFn_",value:function(e){return n.isString(e)}},{key:"validatorEventsFn_",value:function(e){return!n.isDefAndNotNull(e)||n.isObject(e)}},{key:"validatorIdFn_",value:function(e){return n.isString(e)}},{key:"valueElementFn_",value:function(){this.id||(this.id=this.makeId_());var e=this.findElementInContent_(this.id,this.getElementContent_(!0)||"");return e||(e=this.findElementInContent_(this.id,this.getComponentHtml(""))),i.removeChildren(e),i.exitDocument(e),e}},{key:"valueIdFn_",value:function(){var e=this.element;return e&&e.id?e.id:this.makeId_()}},{key:"wrapContentIfNecessary",value:function(e,t,n){return this.checkHasElementTag_(e,t)||(e="<"+n+' id="'+t+'">'+e+"</"+n+">"),e}}]),h}(u);p.componentsCollector=new c,p.surfacesCollector=new v,p.ATTRS={element:{setter:"setterElementFn_",validator:"validatorElementFn_",valueFn:"valueElementFn_",writeOnce:!0},elementClasses:{validator:"validatorElementClassesFn_"},events:{validator:"validatorEventsFn_",value:null},id:{validator:"validatorIdFn_",valueFn:"valueIdFn_",writeOnce:!0},visible:{validator:n.isBoolean,value:!0}},p.ELEMENT_CLASSES="component",p.ELEMENT_TAG_NAME="div",p.RENDERER=h,p.SURFACE_REGEX=/\%\%\%\%~s(?:-([^~:]+))?~\%\%\%\%/g,p.SURFACE_TAG_NAME="div",p.Cache={NOT_INITIALIZED:-2},p.Error={ALREADY_RENDERED:"Component already rendered"},p.INVALID_ATTRS=["components","elementContent"],this.steel.Component=p}.call(this),function(){var t={},n=function(){function n(){e.classCallCheck(this,n)}return e.createClass(n,null,[{key:"get",value:function(e,i){return e?i?n.get(e)[i]:t[e]||{}:t}},{key:"set",value:function(e,n){t[e]=n}}]),n}();this.steel.SoyTemplates=n}.call(this),function(){var e=this.steel.SoyTemplates,t={interceptFn_:null,getOriginalFn:function(e){return e.originalFn?e.originalFn:e},handleTemplateCall_:function(e,n,i,s,r,a){return t.interceptFn_?t.interceptFn_.call(null,e,n,i,s,r,a):i.call(null,s,r,a)},registerTemplates:function(n){var i=e.get(n);Object.keys(i).forEach(function(e){var s=i[e];s.originalFn||(i[e]=t.handleTemplateCall_.bind(null,n,e,s),i[e].originalFn=s)})},startInterception:function(e){t.interceptFn_=e},stopInterception:function(){t.interceptFn_=null}};this.steel.SoyAop=t}.call(this),function(){var t=this.steel.core,n=this.steel.dom,i=this.steel.object,s=this.steel.Component,r=this.steel.ComponentRegistry,a=this.steel.ComponentRenderer,o=this.steel.SoyAop,l=this.steel.SoyTemplates,u={},c=function(a){function c(){return e.classCallCheck(this,c),e.possibleConstructorReturn(this,Object.getPrototypeOf(c).apply(this,arguments))}return e.inherits(c,a),e.createClass(c,null,[{key:"addSurfacesFromTemplates_",value:function(e){for(var t=e.getName(),n=l.get(t),i=Object.keys(n),s=0;s<i.length;s++){var r=i[s],a=o.getOriginalFn(n[r]);if(c.isSurfaceTemplate_(r,a)){var u="content"===r?e.id:r;e.addSurface(u,{renderAttrs:a.params,templateComponentName:t,templateName:r})}}}},{key:"buildComponentConfigData_",value:function(e,t){var n={id:e};for(var i in t)n[i]=t[i];return n}},{key:"buildTemplateData_",value:function(e){var t=e.getAttrNames().filter(function(e){return"element"!==e}),n=e.getSurface(e.id),s=n&&n.componentData?n.componentData:{};return i.mixin(s,e.getAttrs(t))}},{key:"createComponentFromTemplate",value:function(a,u,h){var d=u?n.toElement(u):null,f=i.mixin({id:d?d.id:null},h,{element:d}),m="TemplateComponent"+t.getUid(),v=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),n}(s);return v.RENDERER=c,r.register(v,m),l.set(m,{content:function(e,t,n){return o.getOriginalFn(a)(f,t,n)}}),o.registerTemplates(m),new v(f)}},{key:"decorateFromTemplate",value:function(e,t,n){return c.createComponentFromTemplate(e,t,n).decorate()}},{key:"generateSurfaceElementId",value:function(e,t,n){return n.templateName&&t===e.id&&!c.firstSurfaceFound_[n.templateName]?(c.firstSurfaceFound_[n.templateName]=!0,e.prefixSurfaceId(n.templateName)):e.generateSurfaceElementId(t)}},{key:"getSurfaceContent",value:function(e,t,n){e.surfaceElementId===t.id&&(e.renderAttrs||this.addSurfacesFromTemplates_(t),c.firstSurfaceFound_={}),c.surfaceBeingRendered_=e.surfaceElementId,c.skipInnerCalls_=c.skipInnerCalls_||n;var i=e.templateData;e.templateData=null;var s=c.renderTemplateByName_(t,e.templateComponentName,e.templateName,i);return c.surfaceBeingRendered_=null,c.skipInnerCalls_=!1,s}},{key:"handleComponentCall_",value:function(e,t,n){var i={componentName:t},s=(n||{}).id;return s||(s=c.generateSurfaceElementId(e,c.surfaceBeingRendered_,i)),i.componentData=c.buildComponentConfigData_(s,n),e.buildPlaceholder(s,i)}},{key:"handleInterceptedCall_",value:function(e,t,n,i,s,r,a){return c.skipInnerCalls_?"":"content"===n?this.handleComponentCall_.call(this,e,t,s):this.handleSurfaceCall_.call(this,e,t,n,i,s,r,a)}},{key:"handleSurfaceCall_",value:function(e,n,i,s,r,a,o){var l,u={"static":s["static"],templateComponentName:n,templateData:r,templateName:i};if(t.isDefAndNotNull(r.surfaceElementId))l=r.surfaceElementId;else if(t.isDefAndNotNull(r.surfaceId))l=e.getSurfaceElementId(r.surfaceId.toString());else{if(s["private"])return s.call(null,r,a,o);l=c.generateSurfaceElementId(e,c.surfaceBeingRendered_,u)}return e.buildPlaceholder(l,u)}},{key:"isSurfaceTemplate_",value:function(e,t){return"__deltemplate"!==e.substr(0,13)&&!t["private"]}},{key:"renderFromTemplate",value:function(e,t,n){return c.createComponentFromTemplate(e,t,n).render()}},{key:"renderTemplate_",value:function(e,t,n){o.startInterception(c.handleInterceptedCall_.bind(c,e)),t=o.getOriginalFn(t);var i=t(n||c.buildTemplateData_(e),null,u).content;return o.stopInterception(),i}},{key:"renderTemplateByName_",value:function(e,n,i,s){var r=l.get(n,i);return t.isFunction(r)?c.renderTemplate_(e,r,s):void 0}},{key:"sanitizeHtml",value:function(e){return soydata.VERY_UNSAFE.ordainSanitizedHtml(e)}},{key:"setInjectedData",value:function(e){u=e||{}}}]),c}(a),h=soydata.SanitizedHtml.from;soydata.SanitizedHtml.from=function(e){return e&&"HTML"===e.contentKind&&(e=c.sanitizeHtml(e.content)),h(e)},this.steel.SoyRenderer=c}.call(this),function(){var t=this.steel.Component,n=this.steel.ComponentRegistry,i=this.steel.SoyAop,s=this.steel.SoyRenderer,r=this.steel.SoyTemplates,a=r.get();"undefined"==typeof a.Alert&&(a.Alert={}),a.Alert.content=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(e.id)+'" class="alert alert-dismissible component'+soy.$$escapeHtmlAttribute(e.elementClasses?" "+e.elementClasses:"")+'" role="alert">'+a.Alert.dismiss(e,null,n)+a.Alert.body(e,null,n)+"</div>")},goog.DEBUG&&(a.Alert.content.soyTemplateName="Templates.Alert.content"),a.Alert.body=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(e.id)+'-body">'+(e.body?soy.$$escapeHtml(e.body):"")+"</div>")},goog.DEBUG&&(a.Alert.body.soyTemplateName="Templates.Alert.body"),a.Alert.dismiss=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(e.id)+'-dismiss">'+(e.dismissible?'<button type="button" class="close" aria-label="Close" data-onclick="toggle"><span aria-hidden="true"></span></button>':"")+"</div>")},goog.DEBUG&&(a.Alert.dismiss.soyTemplateName="Templates.Alert.dismiss"),a.Alert.content.params=["id"],a.Alert.body.params=["body","id"],a.Alert.dismiss.params=["dismissible","id"];var o=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,null,[{key:"setImpl",value:function(e){n.register(e,"Alert")}}]),i}(t);o.RENDERER=s,o.setImpl(o),i.registerTemplates("Alert"),this.steel.Alert=o}.call(this),function(){var e=this.steel.dom,t=this.steel.features,n={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"};Object.keys(n).forEach(function(t){e.registerCustomEvent(t,{delegate:!0,handler:function(e,n){var i=n.relatedTarget,s=n.delegateTarget;return!i||i!==s&&!s.contains(i)?(n.customType=t,e(n)):void 0},originalEvent:n[t]})});var i={animation:"animationend",transition:"transitionend"};Object.keys(i).forEach(function(n){var s=i[n];e.registerCustomEvent(s,{event:!0,delegate:!0,handler:function(e,t){return t.customType=s,e(t)},originalEvent:t.checkAnimationEventName()[n]})})}.call(this),function(){var t=this.steel.core,n=this.steel.dom,i=this.steel.features,s=function(){function s(){e.classCallCheck(this,s)}return e.createClass(s,null,[{key:"emulateEnd",value:function(e,t){return this.getComputedDurationMs(e,"animation")>this.getComputedDurationMs(e,"transition")?this.emulateEnd_(e,"animation",t):this.emulateEnd_(e,"transition",t)}},{key:"emulateAnimationEnd",value:function(e,t){return this.emulateEnd_(e,"animation",t)}},{key:"emulateTransitionEnd",value:function(e,t){this.emulateEnd_(e,"transition",t)}},{key:"emulateEnd_",value:function(e,s,r){var a=r;t.isDef(r)||(a=this.getComputedDurationMs(e,s));var o=setTimeout(function(){n.triggerEvent(e,i.checkAnimationEventName()[s])},a),l=function(){clearTimeout(o),u.removeListener()},u=n.once(e,s+"end",l);return{abort:l}}},{key:"getComputedDurationMs",value:function(e,t){return 1e3*(parseFloat(window.getComputedStyle(e,null).getPropertyValue(t+"-duration"))||0)}}]),s}();this.steel.Anim=s}.call(this),function(){function e(e,t,i,r){var a=n(e),o=t.data(a);if(!o)throw new Error("Tried to call method "+i+" on "+e+" pluginwithout initialing it first.");if(!s(o,i))throw new Error("Plugin "+e+" has no method called "+i);return o[i].apply(o,r)}function t(e,t,i,s){var a=n(e),o=i.data(a);s=$.extend({},s,{element:i[0]}),o?o.setAttrs(s):(o=new t(s).render(),o.on("*",r.bind(null,e,i)),i.data(a,o))}function n(e){return"metal-"+e}function i(n,i,s,r,o){return a.isString(r)?e(n,$(s[0]),r,o):(s.each(function(){t(n,i,$(this),r)}),s)}function s(e,t){return a.isFunction(e[t])&&"_"!==t[0]&&"_"!==t[t.length-1]}function r(e,t,i,s){var r=n(e);t.trigger(r+":"+i,s)}var a=this.steel.core,o={register:function(e,t){if(!$)throw new Error("jQuery needs to be included in the page for JQueryAdapter to work.");if(!a.isString(e))throw new Error("The name string is required for registering a plugin");if(!a.isFunction(t))throw new Error("The constructor function is required for registering a plugin");$.fn[e]=function(n){var s=Array.prototype.slice.call(arguments,1);return i(e,t,this,n,s)}}};this.steel.JQueryAdapter=o}.call(this),function(){var t=this.steel.core,n=this.steel.dom,i=this.steel.Alert,s=this.steel.Anim,r=this.steel.EventHandler,a=function(i){function a(t){e.classCallCheck(this,a);var n=e.possibleConstructorReturn(this,Object.getPrototypeOf(a).call(this,t));return n.eventHandler_=new r,n}return e.inherits(a,i),e.createClass(a,[{key:"detached",value:function(){e.get(Object.getPrototypeOf(a.prototype),"detached",this).call(this),this.eventHandler_.removeAllListeners(),clearTimeout(this.delay_)}},{key:"close",value:function(){n.once(this.element,"animationend",this.dispose.bind(this)),n.once(this.element,"transitionend",this.dispose.bind(this)),this.eventHandler_.removeAllListeners(),this.syncVisible(!1)}},{key:"handleDocClick_",value:function(e){this.element.contains(e.target)||this.hide()}},{key:"hide",value:function(){this.visible=!1}},{key:"toggle",value:function(){this.visible=!this.visible}},{key:"syncDismissible",value:function(e){e?this.eventHandler_.add(n.on(document,"click",this.handleDocClick_.bind(this))):this.eventHandler_.removeAllListeners(),n[e?"addClasses":"removeClasses"](this.element,"alert-dismissible")}},{key:"syncVisible",value:function(e){n.removeClasses(this.element,this.animClasses[e?"hide":"show"]),n.addClasses(this.element,this.animClasses[e?"show":"hide"]),s.emulateEnd(this.element),e&&t.isNumber(this.hideDelay)&&this.syncHideDelay(this.hideDelay)}},{key:"syncHideDelay",value:function(e){t.isNumber(e)&&this.visible&&(clearTimeout(this.delay_),this.delay_=setTimeout(this.hide.bind(this),e))}}]),a}(i);a.ELEMENT_CLASSES="alert",a.ATTRS={animClasses:{validator:t.isObject,value:{show:"fade in",hide:"fade"}},body:{value:""},dismissible:{validator:t.isBoolean,value:!0},elementClasses:{value:"alert-success"},hideDelay:{},visible:{value:!1}},i.setImpl(a),this.steel.Alert=a;var o=this.steel.JQueryAdapter;o.register("alert",a)}.call(this),function(){var t=this.steel.core,n=function(){};n.prototype.then=function(){},n.IMPLEMENTED_BY_PROP="$goog_Thenable",n.addImplementation=function(e){e.prototype.then=e.prototype.then,e.prototype.$goog_Thenable=!0},n.isImplementedBy=function(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}};var i=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}},s={};s.throwException=function(e){s.nextTick(function(){throw e})},s.run=function(e,t){s.run.workQueueScheduled_||(s.nextTick(s.run.processWorkQueue),s.run.workQueueScheduled_=!0),s.run.workQueue_.push(new s.run.WorkItem_(e,t))},s.run.workQueueScheduled_=!1,s.run.workQueue_=[],s.run.processWorkQueue=function(){for(;s.run.workQueue_.length;){var e=s.run.workQueue_;s.run.workQueue_=[];for(var t=0;t<e.length;t++){var n=e[t];try{n.fn.call(n.scope)}catch(i){s.throwException(i)}}}s.run.workQueueScheduled_=!1},s.run.WorkItem_=function(e,t){this.fn=e,this.scope=t},s.nextTick=function(e,n){var i=e;return n&&(i=e.bind(n)),i=s.nextTick.wrapCallback_(i),t.isFunction(window.setImmediate)?void window.setImmediate(i):(s.nextTick.setImmediate_||(s.nextTick.setImmediate_=s.nextTick.getSetImmediateEmulator_()),void s.nextTick.setImmediate_(i))},s.nextTick.setImmediate_=null,s.nextTick.getSetImmediateEmulator_=function(){var e=window.MessageChannel;if("undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(e=function(){var e=document.createElement("iframe");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow,n=t.document;n.open(),n.write(""),n.close();var i="callImmediate"+Math.random(),s=t.location.protocol+"//"+t.location.host,r=function(e){(e.origin===s||e.data===i)&&this.port1.onmessage()}.bind(this);t.addEventListener("message",r,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(i,s)}}}),"undefined"!=typeof e){var t=new e,n={},i=n;return t.port1.onmessage=function(){n=n.next;var e=n.cb;n.cb=null,e()},function(e){i.next={cb:e},i=i.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(e){var t=document.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){setTimeout(e,0)}},s.nextTick.wrapCallback_=function(e){return e};var r=function a(e,t){this.state_=a.State_.PENDING,this.result_=void 0,this.parent_=null,this.callbackEntries_=null,this.executing_=!1,a.UNHANDLED_REJECTION_DELAY>0?this.unhandledRejectionId_=0:0===a.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1);try{var n=this;e.call(t,function(e){n.resolve_(a.State_.FULFILLED,e)},function(e){n.resolve_(a.State_.REJECTED,e)})}catch(i){this.resolve_(a.State_.REJECTED,i)}};r.UNHANDLED_REJECTION_DELAY=0,r.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},r.CallbackEntry_=null,r.resolve=function(e){return new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.length||t(void 0);for(var i,s=0;i=e[s];s++)i.then(t,n)})},r.all=function(e){return new r(function(t,n){var s=e.length,r=[];if(!s)return void t(r);for(var a,o=function(e,n){s--,r[e]=n,0===s&&t(r)},l=function(e){n(e)},u=0;a=e[u];u++)a.then(i(o,u),l)})},r.firstFulfilled=function(e){return new r(function(t,n){var s=e.length,r=[];if(!s)return void t(void 0);
for(var a,o=function(e){t(e)},l=function(e,t){s--,r[e]=t,0===s&&n(r)},u=0;a=e[u];u++)a.then(o,i(l,u))})},r.prototype.then=function(e,n,i){return this.addChildPromise_(t.isFunction(e)?e:null,t.isFunction(n)?n:null,i)},n.addImplementation(r),r.prototype.thenAlways=function(e,t){var n=function(){try{e.call(t)}catch(n){r.handleRejection_.call(null,n)}};return this.addCallbackEntry_({child:null,onRejected:n,onFulfilled:n}),this},r.prototype.thenCatch=function(e,t){return this.addChildPromise_(null,e,t)},r.prototype["catch"]=r.prototype.thenCatch,r.prototype.cancel=function(e){this.state_===r.State_.PENDING&&s.run(function(){var t=new r.CancellationError(e);this.cancelInternal_(t)},this)},r.prototype.cancelInternal_=function(e){this.state_===r.State_.PENDING&&(this.parent_?this.parent_.cancelChild_(this,e):this.resolve_(r.State_.REJECTED,e))},r.prototype.cancelChild_=function(e,t){if(this.callbackEntries_){for(var n,i=0,s=-1,a=0;n=this.callbackEntries_[a];a++){var o=n.child;if(o&&(i++,o===e&&(s=a),s>=0&&i>1))break}if(s>=0)if(this.state_===r.State_.PENDING&&1===i)this.cancelInternal_(t);else{var l=this.callbackEntries_.splice(s,1)[0];this.executeCallback_(l,r.State_.REJECTED,t)}}},r.prototype.addCallbackEntry_=function(e){this.callbackEntries_&&this.callbackEntries_.length||this.state_!==r.State_.FULFILLED&&this.state_!==r.State_.REJECTED||this.scheduleCallbacks_(),this.callbackEntries_||(this.callbackEntries_=[]),this.callbackEntries_.push(e)},r.prototype.addChildPromise_=function(e,n,i){var s={child:null,onFulfilled:null,onRejected:null};return s.child=new r(function(a,o){s.onFulfilled=e?function(t){try{var n=e.call(i,t);a(n)}catch(s){o(s)}}:a,s.onRejected=n?function(e){try{var s=n.call(i,e);!t.isDef(s)&&e instanceof r.CancellationError?o(e):a(s)}catch(l){o(l)}}:o}),s.child.parent_=this,this.addCallbackEntry_(s),s.child},r.prototype.unblockAndFulfill_=function(e){if(this.state_!==r.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=r.State_.PENDING,this.resolve_(r.State_.FULFILLED,e)},r.prototype.unblockAndReject_=function(e){if(this.state_!==r.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=r.State_.PENDING,this.resolve_(r.State_.REJECTED,e)},r.prototype.resolve_=function(e,i){if(this.state_===r.State_.PENDING){if(this===i)e=r.State_.REJECTED,i=new TypeError("CancellablePromise cannot resolve to itself");else{if(n.isImplementedBy(i))return i=i,this.state_=r.State_.BLOCKED,void i.then(this.unblockAndFulfill_,this.unblockAndReject_,this);if(t.isObject(i))try{var s=i.then;if(t.isFunction(s))return void this.tryThen_(i,s)}catch(a){e=r.State_.REJECTED,i=a}}this.result_=i,this.state_=e,this.scheduleCallbacks_(),e!==r.State_.REJECTED||i instanceof r.CancellationError||r.addUnhandledRejection_(this,i)}},r.prototype.tryThen_=function(e,t){this.state_=r.State_.BLOCKED;var n=this,i=!1,s=function(e){i||(i=!0,n.unblockAndFulfill_(e))},a=function(e){i||(i=!0,n.unblockAndReject_(e))};try{t.call(e,s,a)}catch(o){a(o)}},r.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,s.run(this.executeCallbacks_,this))},r.prototype.executeCallbacks_=function(){for(;this.callbackEntries_&&this.callbackEntries_.length;){var e=this.callbackEntries_;this.callbackEntries_=[];for(var t=0;t<e.length;t++)this.executeCallback_(e[t],this.state_,this.result_)}this.executing_=!1},r.prototype.executeCallback_=function(e,t,n){t===r.State_.FULFILLED?e.onFulfilled(n):(this.removeUnhandledRejection_(),e.onRejected(n))},r.prototype.removeUnhandledRejection_=function(){var e;if(r.UNHANDLED_REJECTION_DELAY>0)for(e=this;e&&e.unhandledRejectionId_;e=e.parent_)clearTimeout(e.unhandledRejectionId_),e.unhandledRejectionId_=0;else if(0===r.UNHANDLED_REJECTION_DELAY)for(e=this;e&&e.hadUnhandledRejection_;e=e.parent_)e.hadUnhandledRejection_=!1},r.addUnhandledRejection_=function(e,t){r.UNHANDLED_REJECTION_DELAY>0?e.unhandledRejectionId_=setTimeout(function(){r.handleRejection_.call(null,t)},r.UNHANDLED_REJECTION_DELAY):0===r.UNHANDLED_REJECTION_DELAY&&(e.hadUnhandledRejection_=!0,s.run(function(){e.hadUnhandledRejection_&&r.handleRejection_.call(null,t)}))},r.handleRejection_=s.throwException,r.setUnhandledRejectionHandler=function(e){r.handleRejection_=e},r.CancellationError=function(t){function n(t){e.classCallCheck(this,n);var i=e.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this,t));return t&&(i.message=t),i}return e.inherits(n,t),n}(Error),r.CancellationError.prototype.name="cancel","undefined"==typeof window.Promise&&(window.Promise=r),this.steelNamed.Promise={},this.steelNamed.Promise.CancellablePromise=r,this.steelNamed.Promise.async=s}.call(this),function(){var t=this.steel.core,n=this.steel.dom,i=this.steelNamed.Promise.CancellablePromise,s=this.steel.Component,r=this.steel.EventHandler,a=function(s){function a(t){e.classCallCheck(this,a);var n=e.possibleConstructorReturn(this,Object.getPrototypeOf(a).call(this,t));return n.eventHandler_=new r,n.on("select",n.select),n}return e.inherits(a,s),e.createClass(a,[{key:"attached",value:function(){this.inputElement&&this.eventHandler_.add(n.on(this.inputElement,"input",this.handleUserInput_.bind(this)))}},{key:"detached",value:function(){this.eventHandler_.removeAllListeners()}},{key:"handleUserInput_",value:function(){this.request(this.inputElement.value)}},{key:"request",value:function(e){var n=this;return this.pendingRequest&&this.pendingRequest.cancel("Cancelled by another request"),this.pendingRequest=i.resolve().then(function(){return n.data(e)}).then(function(e){return Array.isArray(e)?e.map(n.format.bind(n)).filter(function(e){return t.isDefAndNotNull(e)}):void 0}),this.pendingRequest}},{key:"setData_",value:function(e){return t.isFunction(e)?e:function(){return e}}}]),a}(s);a.ATTRS={data:{setter:"setData_"},format:{value:t.identityFunction,validator:t.isFunction},inputElement:{setter:n.toElement},select:{value:function(e){this.inputElement.value=e.textPrimary,this.inputElement.focus()},validator:t.isFunction},visible:{validator:t.isBoolean,value:!1}},this.steel.AutocompleteBase=a;var o=this.steel.JQueryAdapter;o.register("autocompleteBase",a)}.call(this),function(){var t=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"intersectRect",value:function(e,t,n,i,s,r,a,o){return!(s>n||e>a||r>i||t>o)}}]),t}();this.steel.Geometry=t}.call(this),function(){var t=this.steel.core,n=this.steel.Geometry,i=function(){function i(){e.classCallCheck(this,i)}return e.createClass(i,null,[{key:"getClientHeight",value:function(e){return this.getClientSize_(e,"Height")}},{key:"getClientSize_",value:function(e,n){var i=e;return t.isWindow(e)&&(i=e.document.documentElement),t.isDocument(e)&&(i=e.documentElement),i["client"+n]}},{key:"getClientWidth",value:function(e){return this.getClientSize_(e,"Width")}},{key:"getDocumentRegion_",value:function(e){var t=this.getHeight(e),n=this.getWidth(e);return this.makeRegion(t,t,0,n,0,n)}},{key:"getHeight",value:function(e){return this.getSize_(e,"Height")}},{key:"getOffsetLeft",value:function(e,t){return e.offsetLeft+(t?0:i.getTranslation(e).left)}},{key:"getOffsetTop",value:function(e,t){return e.offsetTop+(t?0:i.getTranslation(e).top)}},{key:"getRegion",value:function(e,n){return t.isDocument(e)||t.isWindow(e)?this.getDocumentRegion_(e):this.makeRegionFromBoundingRect_(e.getBoundingClientRect(),n)}},{key:"getScrollLeft",value:function(e){return t.isWindow(e)?e.pageXOffset:t.isDocument(e)?e.defaultView.pageXOffset:e.scrollLeft}},{key:"getScrollTop",value:function(e){return t.isWindow(e)?e.pageYOffset:t.isDocument(e)?e.defaultView.pageYOffset:e.scrollTop}},{key:"getSize_",value:function(e,n){if(t.isWindow(e))return this.getClientSize_(e,n);if(t.isDocument(e)){var i=e.documentElement;return Math.max(e.body["scroll"+n],i["scroll"+n],e.body["offset"+n],i["offset"+n],i["client"+n])}return Math.max(e["client"+n],e["scroll"+n],e["offset"+n])}},{key:"getTransformMatrixValues",value:function(e){var t=getComputedStyle(e),n=t.msTransform||t.transform||t.webkitTransform||t.mozTransform;if("none"!==n){for(var i=[],s=/([\d-\.\s]+)/g,r=s.exec(n);r;)i.push(r[1]),r=s.exec(n);return i}}},{key:"getTranslation",value:function(e){var t=i.getTransformMatrixValues(e),n={left:0,top:0};return t&&(n.left=parseFloat(6===t.length?t[4]:t[13]),n.top=parseFloat(6===t.length?t[5]:t[14])),n}},{key:"getWidth",value:function(e){return this.getSize_(e,"Width")}},{key:"intersectRegion",value:function(e,t){return n.intersectRect(e.top,e.left,e.bottom,e.right,t.top,t.left,t.bottom,t.right)}},{key:"insideRegion",value:function(e,t){return t.top>=e.top&&t.bottom<=e.bottom&&t.right<=e.right&&t.left>=e.left}},{key:"insideViewport",value:function(e){return this.insideRegion(this.getRegion(window),e)}},{key:"intersection",value:function(e,t){if(!this.intersectRegion(e,t))return null;var n=Math.min(e.bottom,t.bottom),i=Math.min(e.right,t.right),s=Math.max(e.left,t.left),r=Math.max(e.top,t.top);return this.makeRegion(n,n-r,s,i,r,i-s)}},{key:"makeRegion",value:function(e,t,n,i,s,r){return{bottom:e,height:t,left:n,right:i,top:s,width:r}}},{key:"makeRegionFromBoundingRect_",value:function(e,t){var n=t?i.getScrollLeft(document):0,s=t?i.getScrollTop(document):0;return this.makeRegion(e.bottom+s,e.height,e.left+n,e.right+n,e.top+s,e.width)}},{key:"pointInsideRegion",value:function(e,t,n){return i.insideRegion(n,i.makeRegion(t,0,e,e,t,0))}}]),i}();this.steel.Position=i}.call(this),function(){var t=this.steel.Position,n=function(){function n(){e.classCallCheck(this,n)}return e.createClass(n,null,[{key:"align",value:function(e,n,i){var s=this.suggestAlignBestRegion(e,n,i),r=s.region,a=window.getComputedStyle(e,null);if("fixed"!==a.getPropertyValue("position")){r.top+=window.pageYOffset,r.left+=window.pageXOffset;for(var o=e;o=o.offsetParent;)r.top-=t.getOffsetTop(o),r.left-=t.getOffsetLeft(o)}return e.style.top=r.top+"px",e.style.left=r.left+"px",s.position}},{key:"getAlignBestRegion",value:function(e,t,i){return n.suggestAlignBestRegion(e,t,i).region}},{key:"getAlignRegion",value:function(e,i,s){var r=t.getRegion(i),a=t.getRegion(e),o=0,l=0;switch(s){case n.Top:o=r.top-a.height,l=r.left+r.width/2-a.width/2;break;case n.Right:o=r.top+r.height/2-a.height/2,l=r.left+r.width;break;case n.Bottom:o=r.bottom,l=r.left+r.width/2-a.width/2;break;case n.Left:o=r.top+r.height/2-a.height/2,l=r.left-a.width}return{bottom:o+a.height,height:a.height,left:l,right:l+a.width,top:o,width:a.width}}},{key:"isValidPosition",value:function(e){return e>=0&&3>=e}},{key:"suggestAlignBestRegion",value:function(e,n,i){for(var s=0,r=i,a=this.getAlignRegion(e,n,r),o=r,l=a,u=t.getRegion(window),c=0;4>c;){if(t.intersectRegion(u,l)){var h=t.intersection(u,l),d=h.width*h.height;if(d>s&&(s=d,a=l,r=o),t.insideViewport(l))break}o=(i+ ++c)%4,l=this.getAlignRegion(e,n,o)}return{position:r,region:a}}}]),n}();n.Top=0,n.Right=1,n.Bottom=2,n.Left=3,this.steel.Align=n}.call(this),function(){var t=this.steel.Component,n=this.steel.ComponentRegistry,i=this.steel.SoyAop,s=this.steel.SoyRenderer,r=this.steel.SoyTemplates,a=r.get();"undefined"==typeof a.List&&(a.List={}),a.List.content=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(e.id)+'" class="list component'+soy.$$escapeHtmlAttribute(e.elementClasses?" "+e.elementClasses:"")+'">'+a.List.items(e,null,n)+"</div>")},goog.DEBUG&&(a.List.content.soyTemplateName="Templates.List.content"),a.List.items=function(e,t,n){var i='<ul id="'+soy.$$escapeHtmlAttribute(e.id)+'-items" data-onclick="handleClick">';if(null!=e.itemsHtml)i+=soy.$$escapeHtml(e.itemsHtml);else for(var s=e.items,r=s.length,o=0;r>o;o++){var l=s[o];i+=a.ListItem.content({id:e.id+"-items-"+o,index:o,item:l},null,n)}return i+="</ul>",soydata.VERY_UNSAFE.ordainSanitizedHtml(i)},goog.DEBUG&&(a.List.items.soyTemplateName="Templates.List.items"),a.List.content.params=["id"],a.List.items.params=["id","items","itemsHtml"];var o=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,null,[{key:"setImpl",value:function(e){n.register(e,"List")}}]),i}(t);o.RENDERER=s,o.setImpl(o),i.registerTemplates("List"),this.steel.List=o}.call(this),function(){var t=this.steel.Component,n=this.steel.ComponentRegistry,i=this.steel.SoyAop,s=this.steel.SoyRenderer,r=this.steel.SoyTemplates,a=r.get();"undefined"==typeof a.ListItem&&(a.ListItem={}),a.ListItem.content=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<li id="'+soy.$$escapeHtmlAttribute(e.id)+'" class="listitem component'+soy.$$escapeHtmlAttribute(e.elementClasses?" "+e.elementClasses:"")+' clearfix" data-index="'+soy.$$escapeHtmlAttribute(e.index)+'">'+a.ListItem.item(e,null,n)+"</li>")},goog.DEBUG&&(a.ListItem.content.soyTemplateName="Templates.ListItem.content"),a.ListItem.item=function(e,t,n){var i=(e.item.avatar?'<span class="list-image pull-left '+soy.$$escapeHtmlAttribute(e.item.avatar["class"])+'">'+soy.$$escapeHtml(e.item.avatar.content)+"</span>":"")+'<div class="list-main-content pull-left"><div class="list-text-primary">'+soy.$$escapeHtml(e.item.textPrimary)+"</div>"+(e.item.textSecondary?'<div class="list-text-secondary">'+soy.$$escapeHtml(e.item.textSecondary)+"</div>":"")+"</div>";if(e.item.icons){i+='<div class="list-icons pull-right">';for(var s=e.item.icons,r=s.length,a=0;r>a;a++){var o=s[a];i+='<span class="list-icon '+soy.$$escapeHtmlAttribute(o)+'"></span>'}i+="</div>"}if(e.item.iconsHtml){i+='<div class="list-icons pull-right">';for(var l=e.item.iconsHtml,u=l.length,c=0;u>c;c++){var h=l[c];i+=soy.$$escapeHtml(h)}i+="</div>"}return i+=e.item.label?'<span class="label list-label pull-right '+soy.$$escapeHtmlAttribute(e.item.label["class"])+'">'+soy.$$escapeHtml(e.item.label.content)+"</span>":"",soydata.VERY_UNSAFE.ordainSanitizedHtml(i)},goog.DEBUG&&(a.ListItem.item.soyTemplateName="Templates.ListItem.item"),a.ListItem.content.params=["id","index","item"],a.ListItem.item.params=["item"];var o=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,null,[{key:"setImpl",value:function(e){n.register(e,"ListItem")}}]),i}(t);o.RENDERER=s,o.setImpl(o),i.registerTemplates("ListItem"),this.steel.ListItem=o}.call(this),function(){var t=this.steel.ListItem,n=function(t){function n(t){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this,t))}return e.inherits(n,t),n}(t);n.ELEMENT_CLASSES="listitem",n.ATTRS={item:{},index:{value:-1}},t.setImpl(n),this.steel.ListItem=n;var i=this.steel.JQueryAdapter;i.register("listItem",n)}.call(this),function(){var t=this.steel.dom,n=this.steel.List,i=function(n){function i(t){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t))}return e.inherits(i,n),e.createClass(i,[{key:"handleClick",value:function(e){for(var n=e.target;n&&!t.match(n,".listitem");)n=n.parentNode;this.emit("itemSelected",n)}}]),i}(n);i.ELEMENT_CLASSES="list",i.ATTRS={items:{validator:Array.isArray,valueFn:function(){return[]}},itemsHtml:{}},n.setImpl(i),this.steel.List=i;var s=this.steel.JQueryAdapter;s.register("list",i)}.call(this),function(){var t=this.steel.AutocompleteBase,n=this.steel.ComponentRegistry,i=this.steelNamed.Promise.CancellablePromise,s=this.steel.core,r=this.steel.dom,a=this.steel.Align,o=this.steel.List,l=function(t){function n(t){e.classCallCheck(this,n);var i=e.possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this,t));return i.once("render",i.handleRender_),i}return e.inherits(n,t),e.createClass(n,[{key:"attached",value:function(){e.get(Object.getPrototypeOf(n.prototype),"attached",this).call(this),this.list.attach(this.element),this.on("click",this.genericStopPropagation_),this.eventHandler_.add(r.on(this.inputElement,"focus",this.handleInputFocus_.bind(this))),this.eventHandler_.add(r.on(document,"click",this.handleDocClick_.bind(this))),this.visible&&this.align()}},{key:"detached",value:function(){e.get(Object.getPrototypeOf(n.prototype),"detached",this).call(this),this.list.detach()}},{key:"align",value:function(){this.element.style.width=this.inputElement.offsetWidth+"px",a.align(this.element,this.inputElement,a.Bottom)}},{key:"handleDocClick_",value:function(){document.activeElement!==this.inputElement&&(this.visible=!1)}},{key:"handleInputFocus_",value:function(){this.request(this.inputElement.value)}},{key:"handleRender_",value:function(){this.list=(new o).render(this.element),this.list.on("itemSelected",this.onListItemSelected_.bind(this))}},{key:"request",value:function(t){var i=this;return e.get(Object.getPrototypeOf(n.prototype),"request",this).call(this,t).then(function(e){e&&(e.forEach(i.assertItemObjectStructure_),i.list.items=e),i.visible=!!(e&&e.length>0)})}},{key:"onListItemSelected_",value:function(e){var t=parseInt(e.getAttribute("data-index"),10);this.emit("select",this.list.items[t]),this.visible=!1}},{key:"genericStopPropagation_",value:function(e){e.stopPropagation()}},{key:"syncVisible",value:function(t){e.get(Object.getPrototypeOf(n.prototype),"syncVisible",this).call(this,t),t&&this.align()}},{key:"assertItemObjectStructure_",value:function(e){if(!s.isObject(e))throw new i.CancellationError("Autocomplete item must be an object");if(!e.hasOwnProperty("textPrimary"))throw new i.CancellationError("Autocomplete item must be an object with 'textPrimary' key")}}]),n}(t);l.ATTRS={format:{value:function(e){return s.isString(e)?{textPrimary:e}:e}}},l.ELEMENT_CLASSES="autocomplete autocomplete-list",n.register(l),this.steel.Autocomplete=l;var u=this.steel.JQueryAdapter;u.register("autocomplete",l)}.call(this),function(){var t=this.steel.Component,n=this.steel.ComponentRegistry,i=this.steel.SoyAop,s=this.steel.SoyRenderer,r=this.steel.SoyTemplates,a=r.get();"undefined"==typeof a.Dropdown&&(a.Dropdown={}),a.Dropdown.content=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(e.id)+'" class="dropdown component'+soy.$$escapeHtmlAttribute(e.elementClasses?" "+e.elementClasses:"")+soy.$$escapeHtmlAttribute(e.expanded?" open":"")+'">'+(e.header?soy.$$escapeHtml(e.header):"")+a.Dropdown.body(e,null,n)+"</div>")},goog.DEBUG&&(a.Dropdown.content.soyTemplateName="Templates.Dropdown.content"),a.Dropdown.body=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<ul id="'+soy.$$escapeHtmlAttribute(e.id)+'-body" class="dropdown-menu">'+(e.body?soy.$$escapeHtml(e.body):"")+"</ul>")},goog.DEBUG&&(a.Dropdown.body.soyTemplateName="Templates.Dropdown.body"),a.Dropdown.content.params=["header","id"],a.Dropdown.body.params=["body","id"];var o=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,null,[{key:"setImpl",value:function(e){n.register(e,"Dropdown")}}]),i}(t);o.RENDERER=s,o.setImpl(o),i.registerTemplates("Dropdown"),this.steel.Dropdown=o}.call(this),function(){var t=this.steel.dom,n=this.steel.EventHandler,i=this.steel.Dropdown,s=function(i){function s(t){e.classCallCheck(this,s);var i=e.possibleConstructorReturn(this,Object.getPrototypeOf(s).call(this,t));return i.eventHandler_=new n,i}return e.inherits(s,i),e.createClass(s,[{key:"attached",value:function(){e.get(Object.getPrototypeOf(s.prototype),"attached",this).call(this),this.eventHandler_.add(t.on(document,"click",this.handleDocClick_.bind(this)))}},{key:"detached",value:function(){e.get(Object.getPrototypeOf(s.prototype),"detached",this).call(this),this.eventHandler_.removeAllListeners()}},{key:"close",value:function(){this.expanded=!1}},{key:"isOpen",value:function(){return this.expanded}},{key:"handleDocClick_",value:function(e){this.element.contains(e.target)||this.close()}},{key:"open",value:function(){this.expanded=!0}},{key:"syncExpanded",value:function(e){e?t.addClasses(this.element,"open"):t.removeClasses(this.element,"open")}},{key:"syncPosition",value:function(e,n){n&&t.removeClasses(this.element,"drop"+n.toLowerCase()),t.addClasses(this.element,"drop"+e.toLowerCase())}},{key:"toggle",value:function(){this.expanded=!this.expanded}},{key:"validatePosition_",value:function(e){switch(e.toLowerCase()){case"up":case"down":return!0;default:return!1}}}]),s}(i);s.ATTRS={body:{},header:{},expanded:{value:!1},position:{value:"down",validator:"validatePosition_"}},s.ELEMENT_CLASSES="dropdown",i.setImpl(s),this.steel.Dropdown=s}.call(this),function(){var e=this.steel.Dropdown;this.steel.Dropdown=e;var t=this.steel.JQueryAdapter;t.register("dropdown",e)}.call(this),function(){var t=this.steel.Component,n=this.steel.ComponentRegistry,i=this.steel.SoyAop,s=this.steel.SoyRenderer,r=this.steel.SoyTemplates,a=r.get();"undefined"==typeof a.Modal&&(a.Modal={}),a.Modal.content=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(e.id)+'" class="modal component'+soy.$$escapeHtmlAttribute(e.elementClasses?" "+e.elementClasses:"")+'" role="'+soy.$$escapeHtmlAttribute(e.role?e.role:"dialog")+'" aria-labelledby="'+soy.$$escapeHtmlAttribute(e.id)+'-header"><div class="modal-dialog" tabindex="0"><div class="modal-content">'+a.Modal.header(e,null,n)+a.Modal.body(e,null,n)+a.Modal.footer(e,null,n)+"</div></div></div>")},goog.DEBUG&&(a.Modal.content.soyTemplateName="Templates.Modal.content"),a.Modal.body=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<section id="'+soy.$$escapeHtmlAttribute(e.id)+'-body" class="modal-body">'+(e.body?soy.$$escapeHtml(e.body):"")+"</section>")},goog.DEBUG&&(a.Modal.body.soyTemplateName="Templates.Modal.body"),a.Modal.footer=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<footer id="'+soy.$$escapeHtmlAttribute(e.id)+'-footer" class="modal-footer">'+(e.footer?soy.$$escapeHtml(e.footer):"")+"</footer>")},goog.DEBUG&&(a.Modal.footer.soyTemplateName="Templates.Modal.footer"),a.Modal.header=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<header id="'+soy.$$escapeHtmlAttribute(e.id)+'-header" class="modal-header">'+(e.header?'<button type="button" class="close" data-onclick="hide" aria-label="Close"><span aria-hidden="true"></span></button>'+soy.$$escapeHtml(e.header):"")+"</header>")},goog.DEBUG&&(a.Modal.header.soyTemplateName="Templates.Modal.header"),a.Modal.content.params=["id","role"],a.Modal.body.params=["id","body"],a.Modal.footer.params=["footer","id"],a.Modal.header.params=["header","id"];var o=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,null,[{key:"setImpl",value:function(e){n.register(e,"Modal")}}]),i}(t);o.RENDERER=s,o.setImpl(o),i.registerTemplates("Modal"),this.steel.Modal=o}.call(this),function(){var t=this.steel.core,n=this.steel.dom,i=this.steel.EventHandler,s=this.steel.Modal,r=function(t){function s(t){e.classCallCheck(this,s);var n=e.possibleConstructorReturn(this,Object.getPrototypeOf(s).call(this,t));return n.eventHandler_=new i,n}return e.inherits(s,t),e.createClass(s,[{key:"attached",value:function(){this.autoFocus_(this.autoFocus)}},{key:"autoFocus_",value:function(e){if(this.inDocument&&this.visible&&e){var t=this.element.querySelector(e);t&&t.focus()}}},{key:"detached",value:function(){e.get(Object.getPrototypeOf(s.prototype),"detached",this).call(this),this.eventHandler_.removeAllListeners()}},{key:"disposeInternal",value:function(){n.exitDocument(this.overlayElement),this.unrestrictFocus_(),e.get(Object.getPrototypeOf(s.prototype),"disposeInternal",this).call(this)}},{key:"handleDocumentFocus_",value:function(e){this.overlay&&!this.element.contains(e.target)&&this.autoFocus_(".modal-dialog")}},{key:"handleKeyup_",value:function(e){27===e.keyCode&&this.hide()}},{key:"hide",value:function(){this.visible=!1}},{key:"restrictFocus_",value:function(){this.restrictFocusHandle_=n.on(document,"focus",this.handleDocumentFocus_.bind(this),!0)}},{key:"shiftFocusBack_",value:function(){this.lastFocusedElement_&&(this.lastFocusedElement_.focus(),this.lastFocusedElement_=null)}},{key:"show",value:function(){this.visible=!0}},{key:"syncHideOnEscape",value:function(e){e?this.eventHandler_.add(n.on(document,"keyup",this.handleKeyup_.bind(this))):this.eventHandler_.removeAllListeners()}},{key:"syncOverlay",value:function(e){var t=e&&this.visible;n[t?"enterDocument":"exitDocument"](this.overlayElement)}},{key:"syncVisible",value:function(e){this.element.style.display=e?"block":"",this.syncOverlay(this.overlay),this.visible?(this.lastFocusedElement_=document.activeElement,this.autoFocus_(this.autoFocus),this.restrictFocus_()):(this.unrestrictFocus_(),this.shiftFocusBack_())}},{key:"unrestrictFocus_",value:function(){this.restrictFocusHandle_&&this.restrictFocusHandle_.removeListener()}},{key:"valueOverlayElementFn_",value:function(){return n.buildFragment('<div class="modal-backdrop fade in"></div>').firstChild}}]),s}(s);r.ELEMENT_CLASSES="modal",r.ATTRS={autoFocus:{validator:function(e){return e===!1||t.isString(e)},value:".close"},body:{},footer:{},header:{},hideOnEscape:{validator:t.isBoolean,value:!0},overlay:{validator:t.isBoolean,value:!0},overlayElement:{initOnly:!0,valueFn:"valueOverlayElementFn_"},role:{validator:t.isString,value:"dialog"}},s.setImpl(r),this.steel.Modal=r}.call(this),function(){var e=this.steel.Modal;this.steel.Modal=e;var t=this.steel.JQueryAdapter;t.register("modal",e)}.call(this),function(){var t=this.steel.Component,n=this.steel.ComponentRegistry,i=this.steel.SoyAop,s=this.steel.SoyRenderer,r=this.steel.SoyTemplates,a=r.get();"undefined"==typeof a.Switcher&&(a.Switcher={}),a.Switcher.content=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(e.id)+'" class="switcher component'+soy.$$escapeHtmlAttribute(e.elementClasses?" "+e.elementClasses:"")+soy.$$escapeHtmlAttribute(e.checked?" switcher-on":"")+'"><div class="switcher-control"><div class="switcher-control-icon"></div></div></div>')},goog.DEBUG&&(a.Switcher.content.soyTemplateName="Templates.Switcher.content"),a.Switcher.content.params=["id"];var o=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,null,[{key:"setImpl",value:function(e){n.register(e,"Switcher")}}]),i}(t);o.RENDERER=s,o.setImpl(o),i.registerTemplates("Switcher"),this.steel.Switcher=o}.call(this),function(){var t=this.steel.core,n=this.steel.dom,i=this.steel.Switcher,s=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,[{key:"attached",value:function(){this.on("click",this.handleClick)}},{key:"handleClick",value:function(){this.checked=!this.checked}},{key:"syncChecked",value:function(e){n[e?"addClasses":"removeClasses"](this.element,"switcher-on")}}]),i}(i);s.ELEMENT_CLASSES="switcher",s.ATTRS={checked:{validator:t.isBoolean,value:!1}},i.setImpl(s),this.steel.Switcher=s;var r=this.steel.JQueryAdapter;r.register("switcher",s)}.call(this),function(){var t=this.steel.core,n=this.steel.dom,i=this.steel.Align,s=this.steel.Component,r=this.steel.EventHandler,a=this.steel.SoyRenderer,o=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t));return n.eventHandler_=new r,n}return e.inherits(i,t),e.createClass(i,[{key:"attached",value:function(){this.align(),this.syncTriggerEvents(this.triggerEvents)}},{key:"detached",value:function(){this.eventHandler_.removeAllListeners()}},{key:"align",value:function(e){this.syncAlignElement(e||this.alignElement)}},{key:"callAsync_",value:function(e,t){clearTimeout(this.delay_),this.delay_=setTimeout(e.bind(this),t)}},{key:"handleHide",value:function(e){var t=e.delegateTarget,n=t&&t!==this.alignElement;this.callAsync_(function(){this.locked_||(n?this.alignElement=t:(this.visible=!1,this.syncVisible(!1)))},this.delay[1])}},{key:"handleShow",value:function(t){var n=t.delegateTarget;e.get(Object.getPrototypeOf(i.prototype),"syncVisible",this).call(this,!0),this.callAsync_(function(){this.alignElement=n,this.visible=!0},this.delay[0])}},{key:"handleToggle",value:function(e){this.visible?this.handleHide(e):this.handleShow(e)}},{key:"lock",value:function(){this.locked_=!0}},{key:"unlock",value:function(e){this.locked_=!1,this.handleHide(e)}},{key:"syncAlignElement",value:function(e,t){if(t&&e.removeAttribute("aria-describedby"),e&&(this.visible?e.setAttribute("aria-describedby",this.id):e.removeAttribute("aria-describedby"),this.inDocument)){var n=i.Align.align(this.element,e,this.position);this.updatePositionCSS(n)}}},{key:"syncPosition",value:function(){this.syncAlignElement(this.alignElement)}},{key:"syncSelector",value:function(){this.syncTriggerEvents(this.triggerEvents)}},{key:"syncTriggerEvents",value:function(e){if(this.inDocument){this.eventHandler_.removeAllListeners();var t=this.selector;t&&(this.eventHandler_.add(this.on("mouseenter",this.lock),this.on("mouseleave",this.unlock)),e[0]===e[1]?this.eventHandler_.add(n.delegate(document,e[0],t,this.handleToggle.bind(this))):this.eventHandler_.add(n.delegate(document,e[0],t,this.handleShow.bind(this)),n.delegate(document,e[1],t,this.handleHide.bind(this))))}}},{key:"syncVisible",value:function(){this.align()}},{key:"updatePositionCSS",value:function(e){n.removeClasses(this.element,i.PositionClasses.join(" ")),n.addClasses(this.element,i.PositionClasses[e])}}]),i}(s);o.Align=i,o.ATTRS={alignElement:{setter:n.toElement},delay:{validator:Array.isArray,value:[500,250]},triggerEvents:{validator:Array.isArray,value:["mouseenter","mouseleave"]},selector:{validator:t.isString},content:{},position:{validator:o.Align.isValidPosition,value:o.Align.Bottom}},o.PositionClasses=["top","right","bottom","left"],o.RENDERER=a,this.steel.TooltipBase=o}.call(this),function(){var t=this.steel.Component,n=this.steel.ComponentRegistry,i=this.steel.SoyAop,s=this.steel.SoyRenderer,r=this.steel.SoyTemplates,a=r.get();"undefined"==typeof a.Tooltip&&(a.Tooltip={}),a.Tooltip.content=function(e,t,n){var i="",s=["top","right","bottom","left"],r=null!=e.position?s[e.position]:"bottom";return i+='<div id="'+soy.$$escapeHtmlAttribute(e.id)+'" class="tooltip component '+soy.$$escapeHtmlAttribute(r)+soy.$$escapeHtmlAttribute(e.elementClasses?" "+e.elementClasses:"")+'" role="tooltip"><div class="tooltip-arrow"></div>'+a.Tooltip.inner(e,null,n)+"</div>",soydata.VERY_UNSAFE.ordainSanitizedHtml(i)},goog.DEBUG&&(a.Tooltip.content.soyTemplateName="Templates.Tooltip.content"),a.Tooltip.inner=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<section id="'+soy.$$escapeHtmlAttribute(e.id)+'-inner" class="tooltip-inner">'+soy.$$escapeHtml(e.content?e.content:"")+"</section>")},goog.DEBUG&&(a.Tooltip.inner.soyTemplateName="Templates.Tooltip.inner"),a.Tooltip.content.params=["id"],a.Tooltip.inner.params=["content","id"];var o=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,null,[{key:"setImpl",value:function(e){n.register(e,"Tooltip")}}]),i}(t);o.RENDERER=s,o.setImpl(o),i.registerTemplates("Tooltip"),this.steel.Tooltip=o}.call(this),function(){var t=this.steel.ComponentRegistry,n=this.steel.TooltipBase,i=function(t){function n(){return e.classCallCheck(this,n),e.possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return e.inherits(n,t),e.createClass(n,[{key:"syncVisible",value:function(t){this.element.style.opacity=t?1:"",e.get(Object.getPrototypeOf(n.prototype),"syncVisible",this).call(this,t)}}]),n}(n);i.Align=n.Align,i.ELEMENT_CLASSES="tooltip",
t.register(i),this.steel.Tooltip=i}.call(this),function(){var e=this.steel.Tooltip;this.steel.Tooltip=e;var t=this.steel.JQueryAdapter;t.register("tooltip",e)}.call(this),function(){var t=this.steel.Component,n=this.steel.ComponentRegistry,i=this.steel.SoyAop,s=this.steel.SoyRenderer,r=this.steel.SoyTemplates,a=r.get();"undefined"==typeof a.TooltipMenu&&(a.TooltipMenu={}),a.TooltipMenu.content=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<nav id="'+soy.$$escapeHtmlAttribute(e.id)+'" class="tooltip-menu component bottom'+soy.$$escapeHtmlAttribute(e.elementClasses?" "+e.elementClasses:"")+'">'+a.TooltipMenu.items(e,null,n)+"</nav>")},goog.DEBUG&&(a.TooltipMenu.content.soyTemplateName="Templates.TooltipMenu.content"),a.TooltipMenu.items=function(e,t,n){for(var i='<ul id="'+soy.$$escapeHtmlAttribute(e.id)+'-items" class="tooltip-menu-list">',s=e.content,r=s.length,a=0;r>a;a++){var o=s[a];i+='<li class="tooltip-menu-item">'+(o.href?'<a class="tooltip-menu-link" href="'+soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(o.href?o.href:"#"))+'">'+soy.$$escapeHtml(o.content)+"</a>":'<button class="tooltip-menu-link btn-transparent" name="'+soy.$$escapeHtmlAttribute(o.name?o.name:"")+'" value="'+soy.$$escapeHtmlAttribute(o.value?o.value:"")+'">'+soy.$$escapeHtml(o.content)+"</button>")+"</li>"}return i+="</ul>",soydata.VERY_UNSAFE.ordainSanitizedHtml(i)},goog.DEBUG&&(a.TooltipMenu.items.soyTemplateName="Templates.TooltipMenu.items"),a.TooltipMenu.content.params=["id"],a.TooltipMenu.items.params=["content","id"];var o=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,null,[{key:"setImpl",value:function(e){n.register(e,"TooltipMenu")}}]),i}(t);o.RENDERER=s,o.setImpl(o),i.registerTemplates("TooltipMenu"),this.steel.TooltipMenu=o}.call(this),function(){var t=this.steel.dom,n=this.steel.Tooltip,i=this.steel.TooltipMenu,s=function(n){function i(t){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,t))}return e.inherits(i,n),e.createClass(i,[{key:"attached",value:function(){e.get(Object.getPrototypeOf(i.prototype),"attached",this).call(this),this.eventHandler_.add(t.on(document,"click",this.handleDocClick_.bind(this)))}},{key:"handleDocClick_",value:function(e){this.element.contains(e.target)||(this.visible=!1)}}]),i}(n);s.ELEMENT_CLASSES_MERGED="tooltip-menu component",s.ELEMENT_TAG_NAME="nav",s.ATTRS={delay:{validator:Array.isArray,value:[0,0]},triggerEvents:{validator:Array.isArray,value:["click","click"]},content:{validator:Array.isArray,valueFn:function(){return[]}}},i.setImpl(s),this.steel.TooltipMenu=s;var r=this.steel.JQueryAdapter;r.register("tooltipMenu",s)}.call(this),function(){var t=this.steel.Component,n=this.steel.ComponentRegistry,i=this.steel.SoyAop,s=this.steel.SoyRenderer,r=this.steel.SoyTemplates,a=r.get();"undefined"==typeof a.Treeview&&(a.Treeview={}),a.Treeview.content=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(e.id)+'" class="treeview component'+soy.$$escapeHtmlAttribute(e.elementClasses?" "+e.elementClasses:"")+'" role="tree">'+a.Treeview.nodes(e,null,n)+"</div>")},goog.DEBUG&&(a.Treeview.content.soyTemplateName="Templates.Treeview.content"),a.Treeview.nodes=function(e,t,n){var i="",s=e.id+"-"+(null!=e.surfaceId?e.surfaceId:"nodes");i+='<ul id="'+soy.$$escapeHtmlAttribute(s)+'" class="treeview-nodes">';for(var r=e.nodes,o=r.length,l=0;o>l;l++){var u=r[l],c=l;i+=a.Treeview.node({id:e.id,node:u,surfaceId:null!=e.parentSurfaceId?e.parentSurfaceId+"-"+c:c},null,n)}return i+="</ul>",soydata.VERY_UNSAFE.ordainSanitizedHtml(i)},goog.DEBUG&&(a.Treeview.nodes.soyTemplateName="Templates.Treeview.nodes"),a.Treeview.node=function(e,t,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<li id="'+soy.$$escapeHtmlAttribute(e.id)+"-"+soy.$$escapeHtmlAttribute(e.surfaceId)+'" class="treeview-node">'+(e.node?'<div class="treeview-node-wrapper'+soy.$$escapeHtmlAttribute(e.node.expanded?" expanded":"")+'"><div class="treeview-node-main clearfix'+soy.$$escapeHtmlAttribute(e.node.children?" hasChildren":"")+'" data-onclick="handleNodeClicked_" data-onkeyup="handleNodeKeyUp_" aria-expanded="'+soy.$$escapeHtmlAttribute(e.node.expanded?"true":"false")+'" role="treeitem" tabindex="0">'+(e.node.children?'<div class="treeview-node-toggler"></div>':"")+'<span class="treeview-node-name">'+soy.$$escapeHtml(e.node.name)+"</span></div>"+(e.node.children?a.Treeview.nodes({id:e.id,nodes:e.node.children,parentSurfaceId:e.surfaceId,surfaceId:e.surfaceId+"-nodes"},null,n):"")+"</div>":"")+"</li>")},goog.DEBUG&&(a.Treeview.node.soyTemplateName="Templates.Treeview.node"),a.Treeview.content.params=["id"],a.Treeview.nodes.params=["id","nodes","parentSurfaceId","surfaceId"],a.Treeview.node["private"]=!0;var o=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,null,[{key:"setImpl",value:function(e){n.register(e,"Treeview")}}]),i}(t);o.RENDERER=s,o.setImpl(o),i.registerTemplates("Treeview"),this.steel.Treeview=o}.call(this),function(){var t=this.steel.dom,n=this.steel.Treeview,i=function(n){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,Object.getPrototypeOf(i).apply(this,arguments))}return e.inherits(i,n),e.createClass(i,[{key:"attached",value:function(){this.on("nodesChanged",this.onNodesChanged_),this.on("renderSurface",this.handleRenderSurface_)}},{key:"getNodeObj",value:function(e){for(var t=this.nodes[e[0]],n=1;n<e.length;n++)t=t.children[e[n]];return t}},{key:"getNodeObjFromId_",value:function(e){var t=e.substr(this.id.length+1).split("-");return this.getNodeObj(t)}},{key:"handleNodeClicked_",value:function(e){this.toggleExpandedState_(e.delegateTarget)}},{key:"handleNodeKeyUp_",value:function(e){(13===e.keyCode||32===e.keyCode)&&this.toggleExpandedState_(e.delegateTarget)}},{key:"handleRenderSurface_",value:function(e,t){this.ignoreSurfaceUpdate_&&(t.preventDefault(),this.ignoreSurfaceUpdate_=!1)}},{key:"onNodesChanged_",value:function(){this.ignoreSurfaceUpdate_=!1}},{key:"toggleExpandedState_",value:function(e){var n=this.getNodeObjFromId_(e.parentNode.parentNode.id);n.expanded=!n.expanded,n.expanded?(t.addClasses(e.parentNode,"expanded"),e.setAttribute("aria-expanded","true")):(t.removeClasses(e.parentNode,"expanded"),e.setAttribute("aria-expanded","false")),this.nodes=this.nodes,this.ignoreSurfaceUpdate_=!0}}]),i}(n);i.ELEMENT_CLASSES="treeview",i.ATTRS={nodes:{validator:Array.isArray,valueFn:function(){return[]}}},n.setImpl(i),this.steel.Treeview=i}.call(this),function(){var e=this.steel.Treeview;this.steel.Treeview=e;var t=this.steel.JQueryAdapter;t.register("treeview",e)}.call(this)}).call(this);